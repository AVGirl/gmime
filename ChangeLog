2002-04-02  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-message.c (g_mime_message_add_recipients_from_string):
	Destroy the temporary addrlist.

2002-03-29  Jeffrey Stedfast  <fejj@ximian.com>

	* configure.in: Detect the iconv-friendly formats for iso charsets
	at configure time and dump them into iconv-detect.h for use in
	gmime-charset.c.

	* gmime-charset.c: Updated to use iconv-detect.h if it exists.

2002-03-23  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-param.c (rfc2184_decode): Don't bother using
	g_mime_charset_name here either because g_mime_iconv_open does it
	for us.
	(encode_param): And again here.

	* gmime-utils.c (rfc2047_decode_word): Don't bother with a
	charenc, we don't need to get the iconv-friednly
	name. g_mime_iconv_open does that for us.
	(rfc2047_encode_word): Same.

	* gmime-charset.c (main): Added support for multibyte charsets.

	* gen-multibyte.c: Generates character tables for multibyte
	charsets such as iso-2022-jp and euc-kr.

2002-03-23  Jeffrey Stedfast  <fejj@ximian.com>

	* unicode.[c,h]: New private source files to do some unicode
	shiz. Ripped out of gmime-charset.c

	* gmime-charset.c: Removed unicode stuff.

	* gmime-utils.c (g_mime_utils_8bit_header_encode): Rewritten to be
	smarter about grouping like-words.
	(rfc2047_encode_phrase_get_words): Splits out words.
	(rfc2047_encode_phrase_merge_words): Merges like-words.
	(rfc2047_encode_phrase): This is the muscle behind
	8bit_header_encode.
	(rfc2047_encode_word): Modified to write data to a GString instead
	of returning a buffer. Also now takes a charset parameter.
	(g_mime_utils_8bit_header_encode_phrase): Updated to use the new
	rfc2047_encode_word API and also to pick an appropriate charset.

2002-03-21  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-charset.c: Moved tables[] into the #ifdef
	BUILD_CHARSET_MAP block.

	* gmime-filter-charset.c (filter_filter): Same fix as I made
	earlier to g_mime_iconv_strndup.

2002-03-20  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-iconv-utils.c (g_mime_iconv_strndup): Don't forget to
	update the outbuf pointer after reallocing. Exit the loop when
	inleft == 0 even if errno is E2BIG.

	* gmime-charset.c: Changed the canonical format for
	CANONINICAL_ISO_S_FORMAT for Solaris.

	* gmime-utils.c (rfc2047_decode_word): strcasecmp on charenc, not
	charset because charset has not yet been initialized.

2002-03-19  Jeffrey Stedfast  <fejj@ximian.com>

	* internet-address.c (decode_mailbox): If gmime was initialized to
	use UTF-8 interfaces and we encountered illegal 8bit text, attempt
	to convert it to UTF-8 using the user's locale charset.

	* gmime-charset.c (g_mime_charset_name): Fixed the ISO parser.
	(g_mime_charset_best): New function to compute the best charset
	for a given text input.

	* gmime-param.c (rfc2184_decode): If gmime was initialized to use
	UTF-8 interfaces, then convert the decoded text to UTF-8 here.
	(decode_param): If gmime was initialized to use UTF-8 interfaces
	and we encounter illegal 8bit text, attempt to convert it to
	UTF-8.
	(encode_param): If gmime was initialized to use UTF-8 interfaces,
	convert the input buffer to the locale charset before encoding.

	* gmime-utils.c (rfc2047_decode_word): Renamed from
	decoded_encoded_8bit_word. If gmime was initialized to use UTF-8
	interfaces, then convert the header to UTF-8 here.
	(rfc2047_encode_word): Renamed from encode_8bit_word. If gmime was
	initialized to use UTF-8 interfaces, convert input text to locale
	charset before encoding.
	(g_mime_utils_8bit_header_encode): Avoid excess mallocing.

2002-03-17  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-message.c (g_mime_message_write_to_stream): fixed doc
	comment.

2002-03-16  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-stream-fs.c (stream_destroy): Check fd against -1.

	* gmime-stream-mmap.c (stream_destroy): Check that fd != -1.

2002-03-15  Charles Kerr <charles@rebelbase.com>

	* gmime-filter-charset.c: fixed minor compiler warnings.
	* gmime-iconv-utils.c: same.
	* test-html.c: same.
	* test-iconv.c: same.
	* test-mime.c: same.
	* test-streams.c: same.

2002-03-15  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-utils.c (g_mime_utils_uudecode_step): Fixed a logic
	mistake. All is good now in the land of UU :-)

2002-03-15  Charles Kerr <charles@rebelbase.com>

	Syncing up with small changes from Pan...

	* gmime-content-type.c: remove unused #include <alloca.h>
	* gmime-message.c: same.
	* gmime-part.c: same.
	* internet-address.c: same.

	* gmime-filter-basic.c: add #include <string.h> (strncmp)
	* gmime-filter-yenc.c: add #include <string.h> (strncmp)
	* gmime-iconv-utils.c: add #include <string.h> (strlen)
	* gmime-iconv.c: add #include <string.h> (strlen)
	* gmime-iconv.c: add #include <stdio.h> (sprintf)
	
2002-03-14  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-filter-yenc.c (filter_reset): Added a switch-statement
	based on direction. Yes, for now the INIT state for encode/decode
	are both the same but this may change? Probably not but oh well
	:-)
	(g_mime_ydecode_step): Sync up with Charles' yenc fixes.

2002-03-13  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-filter-yenc.c: Compile fixes.

2002-03-12  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-filter-yenc.c (g_mime_filter_yenc_get_pcrc): Finalize the
	crc before returning.
	(g_mime_filter_yenc_get_crc): Same.

2002-03-12  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-filter-yenc.c: New filter to encode/decode yEnc streams.

2002-03-03  Jeffrey Stedfast  <fejj@ximian.com>

	Thanks to Carlos Morgado <chbm@chbm.nu>

	* gmime.spec.in: Fix.

2002-03-03  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-part.c (g_mime_part_write_to_stream): Get rid of some
	extra line feeds.

2002-02-21  Jeffrey Stedfast  <fejj@ximian.com>

	* doc/*: Updated.

	* configure.in: Updated version to 0.8.0

2002-01-25  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-charset.c (g_mime_charset_name): Updated for AIX, HPUX,
	IRIX, and Sun systems.

2002-01-24  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-iconv.c (iconv_cache_bucket_add_node): Fixed an oops.
	(iconv_cache_bucket_get_first_unused): Fixed another oops.

2002-01-20  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-data-wrapper.c (g_mime_data_wrapper_write_to_stream):
	Handle the x-uuencode encoding type.

	* gmime-utils.c (g_mime_utils_uuencode_close): No longer needs a
	uulen argument since it is now compacted into the state argument.
	(g_mime_utils_uuencode_step): Same here.

	* gmime-filter-basic.c (filter_filter): Ignore data until we have
	found the "begin" line. Also, we no longer need uulen.
	(filter_complete): Same.

	* gmime-part.c (g_mime_part_encoding_to_string): Handle
	x-uuencode.
	(g_mime_part_encoding_from_string): Same.
	(g_mime_part_set_pre_encoded_content): Here too.
	(write_content): And again here.

2002-01-19  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-iconv.c (iconv_node_new): Return the node - how did I miss
	this!?

2002-01-18  Jeffrey Stedfast  <fejj@ximian.com>

	* configure.in: Fixed more silliness.

	* acconfig.h: Added #undef's for some iconv stuff.

	* gmime-filter-charset.c (g_mime_filter_charset_new): Put the
	charset arguments in the right order.

	* gmime-iconv.c (g_mime_iconv_open): Swap the to/from arguments so
	that they are in the same order as iconv_open.

	* gmime-iconv-utils.c (iconv_utils_init): Put the to/from
	arguments in the right order.

2002-01-17  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-iconv-utils.c (g_mime_iconv_strndup): If we get an EILSEQ,
	just return NULL rather than g_strndup'ing the original
	string. We'd rather get back NULL and know it failed than get back
	a string thinking everything went okay.

	* configure.in: Fixed some silliness, thanks to Charles Schmidt.

2002-01-16  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-iconv-utils.c (g_mime_iconv_strndup): New utility function
	to iconv n bytes of a string and return a buffer containing the
	converted string.
	(g_mime_iconv_strdup): Same but for the whole string.
	(g_mime_iconv_locale_to_utf8): Converts a string in the locale
	charset to utf8.
	(g_mime_iconv_locale_to_utf8_length): Same but for a sublength of
	the string.
	(g_mime_iconv_utf8_to_locale): Converts a string from utf8 to the
	locale charset.
	(g_mime_iconv_utf8_to_locale_length): Same but for a sublength of
	the string.

2002-01-15  Jeffrey Stedfast  <fejj@ximian.com>

	* test-iconv.c: test suite to make sure that the gmime-iconv cache
	works.

	* gmime-iconv.c (g_mime_iconv_init): Initialize the iconv_node
	memchunk.
	(g_mime_iconv_shutdown): Destroy the iconv_node memchunk.
	(iconv_node_destroy): Use memchunk_free instead of g_free.
	(iconv_node_new): Use memchunk_alloc.
	(iconv_node_set_used): Add/Remove the node to the iconv_open_hash.

2002-01-14  Jeffrey Stedfast  <fejj@ximian.com>

	* configure.in: Bumped the version to 0.7.7

	* doc/*: Updated to document the new gmime-iconv interfaces.

	* gmime-filter-charset.c (g_mime_filter_charset_new): Use
	g_mime_iconv_open instead of iconv_open. Also no longer need to
	use g_mime_charset_name() since gmime-iconv does this for us.
	(filter_destroy): Use g_mime_iconv_close() instead of
	iconv_close().

	* gmime-iconv.c (g_mime_iconv_open): New wrapper around
	iconv_open() so that we can cache the results. This'll be a major
	speedup for systems like Solaris where iconv_open() must dlopen a
	module for each of the charsets. Also uses g_mime_charset_name()
	to get the iconv-friendly charset name for you.
	(g_mime_iconv_close): New wrapper around iconv_close().

2002-01-13  Jeffrey Stedfast  <fejj@ximian.com>

	* configure.in: Bumped version to 0.7.6

	* doc/*: Updated to document the new charset code.

	* gmime.h.in: Added #includes for gmime-charset.h and
	gmime-filter-charset.h.

	* gmime-filter-charset.c: New filter for converting text between
	charsets using iconv.

	* gmime-charset.c (g_mime_charset_name): New function to derive
	the iconv-friendly name for a given charset.

2002-01-09  Charles Kerr <charles@rebelbase.com>

	* internet-address.c (internet_address_list_prepend): replaced
	"g_return_if_fail" with "g_return_val_if_fail".
	* internet-address.c (internet_address_list_append): same.

	* internet-address.c (internet_address_set_group): removed
	unused variables to shut up compiler.
	* gmime-param.c (rfc2184_decode): same.

2002-01-08  Jeffrey Stedfast  <fejj@ximian.com>

	* config.h.in: Added a #include <alloca.h> if HAVE_ALLOCA_H is
	defined - this limits the number of places I have to conditionally
	add #include <alloca.h> in the source files.

2002-01-05  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-utils.c (parse_broken_date): Implemented.

2002-01-04  Jeffrey Stedfast  <fejj@ximian.com>

	* memchunk.c (memchunk_clean): Oops, when tree_search() returns 0
	we want to prune it, not the other way around :-)

2002-01-02  Jeffrey Stedfast  <fejj@ximian.com>

	* memchunk.c (memchunk_clean): Fixed a logic mistake that
	prevented pruning of the head node.

2002-01-01  Charles Kerr <charles@rebelbase.com>

	* gmime-message (g_mime_message_get_body): added g_return_val_if_fail
	checks in the entry point.

2001-12-31  Jeffrey Stedfast  <fejj@ximian.com>

	* internet-address.c (decode_address): Optimized group parsing.

	* doc/*: Updated.

2001-12-31  Jeffrey Stedfast  <fejj@ximian.com>

	* strlib.c (strncasecmp): Convert the chars to lowercase before
	diffing.

2001-12-30  Jeffrey Stedfast  <fejj@ximian.com>

	* configure.in: Bumped version number to 0.7.5 since the
	internet-address API and bits of the gmime-message API have
	changed.

	* internet-address.c (internet_address_new): Initialize the
	refcount to 1.
	(internet_address_destroy): This is now an internal function.
	(internet_address_ref): New function to ref an InternetAddress
	object.
	(internet_address_unref): New function to unref an InternetAddress
	object.
	(internet_address_set_group): Updated to use the new
	internet_address_list functions.
	(internet_address_add_member): Same.
	(internet_address_list_prepend): New function to manipulate a list
	of InternetAddress objects.
	(internet_address_list_append): Same.
	(internet_address_list_concat): Another new function.
	(internet_address_list_length): Again...
	(internet_address_list_destroy): Destroy a list of addresses.
	(internet_address_list_to_string): New utility function to write a
	list of addresses to a string.
	(internet_address_parse_string): Optimized slightly by not using
	GLists' generic append function and also updated to use
	InternetAddressList.

	* gmime-message.c (recipients_destroy): Updated to call
	internet_address_list_destroy.
	(sync_recipient_header): Updated to let the InternetAddress code
	do the work for us.
	(g_mime_message_add_recipient): Updated to use the new
	InternetAddress API.
	(g_mime_message_add_recipients_from_string): Same.
	(g_mime_message_get_recipients): Return an InternetaddressList
	instead of GList.

2001-12-30  Jeffrey Stedfast  <fejj@ximian.com>

	* strlib.c (strncasecmp): Do null-checking.

	* TODO: Remove features that have already been
	implemented/fixed/whatever.

2001-12-30  Jeffrey Stedfast  <fejj@ximian.com>

	* memchunk.c (memchunk_clean): Prune 'cleaned' nodes from our
	free-node list. Thanks to Charles Kerr for discovering this bug.

	* strlib.c (strncasecmp): Moved the return calculation to within
	the loop so as to only take a difference if the strings are not
	identical. This also fixes a bug that would falsely return
	non-zero for strings that were identical for the first n bytes.

2001-12-20  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-stream.c (g_mime_stream_construct): 'type' is now an
	unsigned int rather than a signed int.

	* memchunk.c (memchunk_clean): Oops. Don't forget to free the tree
	after we're finished with it...

2001-12-18  Jeffrey Stedfast  <fejj@ximian.com>

	Various compiler warning fixes to several source files (mostly
	"unused variable" type stuff).

2001-12-17  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-utils.c (datetok): reimplement to not use GLists
	(appending is slow) and also to not g_strndup the token, instead
	just remember it's offset and length so we can examine it later.
	(decode_int): New function to decode an int.
	(get_wday): Now takes an inlen argument.
	(get_mday): Same. Also calls decode_int.
	(get_month): Here too.
	(get_year): Again here... also calls decode_int.
	(get_tzone): Modified to use struct _date_token.
	(get_time): Completely rewritten.

2001-12-16  Jeffrey Stedfast  <fejj@ximian.com>

	* memchunk.[c,h]: A memchunk library similar to g_mem_chunk's but
	faster.

2001-12-16  Jeffrey Stedfast  <fejj@ximian.com>

	* configure.in: Added a --enable-warnings to turn on compiler
	warnings.

	* gmime-utils.c: Various compiler warning cleanup.

	* gmime-object.c (g_mime_object_construct): Change the type
	argument to be of type unsigned rather than int.

	* gmime-filter-html.c (url_extract): g_strndup takes an unsigned
	length argument.

	* gmime-filter-from.c (filter_filter): memcpy takes an unsigned
	length argument.

	* gmime-disposition.c (g_mime_disposition_new): g_strndup takes an
	unsigned length argument.

	* gmime-content-type.c (g_mime_content_type_new_from_string):
	g_strndup takes an unsigned length argument.

	* gmime-charset.c (g_mime_charset_init): g_strndup takes an
	unsigned length argument.

2001-12-16  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-part.c (g_mime_part_destroy): Now an internal-only method.

	* gmime-message.c (g_mime_message_destroy): Now an internal-only
	method.

2001-12-05  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-filter-basic.c (filter_filter):
	(filter_complete): The outbuf for QP decoding can be up to len + 2
	bytes and UU decoding outbuf can be up to len + 3 bytes.

2001-12-01  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-parser.c (parse_content_headers): Set is_multipart to
	FALSE.
	(g_mime_parser_construct_part_internal): Get the inlen properly
	and do content-offsetting a little better by skipping past the
	end-of-header marker.

	* gmime-stream-buffer.c (g_mime_stream_buffer_gets): Use the
	'register' keyword for some variables.

	* gmime-data-wrapper.c (g_mime_data_wrapper_set_stream): Safeguard
	against NULL streams.
	(g_mime_data_wrapper_write_to_stream): Reset the stream before
	writing too.

	* gmime-stream-mem.c (stream_seek): Fix to work like the others.
	(stream_read): On error, always return -1 (and not just any value
	less than 0)
	(stream_write): Same.

2001-11-30  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-part.c (write_content): Implemented a slight optimization
	which bypasses the need to do any encoding in certain
	circumstances.

2001-11-28  Jeffrey Stedfast  <fejj@ximian.com>

	* pan-mime-parser.c (parser_read_until_boundary): Make sure
	boundary is non-NULL before calling strlen on it.

2001-11-26  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-parser.c (g_mime_parser_construct_part_internal): Fixed a
	bug - don't set bounds on the original stream, set the bounds on
	our temporary memory stream. Also got rid of find_header_end().

	* gmime-filter-from.c (filter_filter): initialize fromcount to 0.

2001-11-25  Jeffrey Stedfast  <fejj@ximian.com>

	* strlib.c (strlcpy): BSD defines the prototype as returning
	size_t, the strlen of the resultant string.
	(strlcat): Same.

	* gmime-stream-buffer.c (stream_flush): Oops, memmove the buffer
	too and a smidgen of code cleanup.
	(stream_reset): Fix reset for block write mode.

	* configure.in: Bumped the version to 0.7.4 and added checks for
	system mmap functions.

	* gmime-stream-mmap.[c,h]: New stream that uses an mmaped buffer.

2001-11-24  Jeffrey Stedfast  <fejj@ximian.com>

	* doc/gmime-docs.sgml: Added documentation of the use of filters.

2001-11-23  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-stream-buffer.c (stream_seek): Implemented.

	* gmime-parser.c (parse_content_headers): Fixed another memory
	leak here.

	* gmime-param.c (decode_param_list): Fixed a small memory leak.

2001-11-22  Jeffrey stedfast  <fejj@ximian.com>

	* gmime-filter-from.[c,h]: New filter to escape from-lines.

	* pan-mime-parser.c (parser_read_until_boundary): Slight
	optimization.

2001-11-21  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-utils.c (is_8bit_word_encoded): Make into a macro, we
	don't need to do a strlen because the atom is a GString which
	means we have it's length already. This also saves us some
	overhead of calling a function.
	(g_mime_utils_8bit_header_decode): Update to pass the len argument
	to is_8bit_word_encoded.

2001-11-18  Jeffrey Stedfast  <fejj@ximian.com>

	* configure.in: Bumped version to 0.7.3

	* gmime-param.c: GMimeParam is now a linked list of parameters
	rather than a single name/value pair.
	(g_mime_param_new_from_string): Now returns a parameter list based
	on the input string rather than only returning a single parameter
	name/value pair. Also updated to handle rfc2184 encoded
	parameters.
	(g_mime_param_destroy): Destroy the linked list of params.
	(g_mime_param_append): Append a new parameter.
	(g_mime_param_append_param): Append a new parameter object.
	(g_mime_param_write_to_string): New function (which replaces
	g_mime_param_to_string) which correctly encodes (either by quoting
	the value or rfc2184 encoding it) the list of parameters and
	optionally folds them suitable for header wrapping.

	* gmime-disposition.[c,h]: New source files to handle
	parsing/generating Content-Disposition headers.

	* gmime-part.c (g_mime_part_destroy): Updated to use
	g_mime_disposition_destroy.
	(g_mime_part_set_content_disposition_object): New function for
	setting the disposition object on a mime part.
	(g_mime_part_set_content_disposition): Updated to use
	g_mime_disposition_set.
	(g_mime_part_get_content_disposition): Updated to use
	g_mime_disposition_get.
	(g_mime_part_add_content_disposition_parameter): Updated to use
	g_mime_disposition_add_parameter.
	(g_mime_part_get_content_disposition_parameter): Updated to use
	g_mime_disposition_get_parameter.
	(g_mime_part_set_filename): Updated to use
	g_mime_disposition_add_parameter.
	(g_mime_part_get_filename): Updated to use
	g_mime_disposition_get_parameter.

	* gmime-content-type.c (g_mime_content_type_new_from_string): Use
	the gmime-param code to parse any Content-Type parameters.
	(g_mime_content_type_destroy): Updated to use
	g_mime_param_destroy.
	(g_mime_content_type_add_parameter): Updated to use g_mime_param
	functions.

	* gmime-utils.c (g_mime_utils_header_fold): Fixed a small header
	folding bug.

	* gmime-parser.c (parse_content_headers): Updated to use the
	GMimeDisposition parser.

	* pan-mime-parser.c (parse_content_headers): Updated to use the
	GMimeDisposition parser.

2001-11-16  Jeffrey Stedfast  <fejj@ximian.com>

	* configure.in: Bumped version to 0.7.2 due to the change-over to
	refcounted mime objects.

	* gmime-object[c,h]: New source files that implement an abstract
	Object class.

	* gmime-message.c: Updated to subclass GMimeObject

	* gmime-part.c: Updated to subclass GMimeObject
	(g_mime_part_set_content_header): Set an arbitrary mime content
	header.
	(g_mime_part_get_content_header): Get an arbitrary mime content
	header.
	(g_mime_part_add_child): Finally deprecated, please use
	g_mime_part_add_subpart instead if you aren't already.

	* gmime-parser.c: Updated to unref mime parts where appropriate as
	well as set unknown content headers on mime parts.

	* pan-mime-parser.c: Same as gmime-parser.c

2001-11-14  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-stream-null.c (g_mime_stream_null_new): A new stream,
	similar to /dev/null basically.

2001-11-10  Jeffrey Stedfast  <fejj@ximian.com>

	* configure.in: Added checks for strlib functions and bumped the
	version to 0.7.1 (there won't be an official 0.7.1 release but I
	figure I should be bumping version numbers whenever I add
	functionality).

	* strlib.[c,h]: New string library that provides anything that the
	system libc doesn't (includig strnstr and stpcpy).

	* gmime-filter-html.[c,h]: New filter that converts plain text
	into HTML suitable for display in things like GtkHTML (makes urls
	into hyperlinks and preserves whitespace and such).

	* gmime-parser.c (g_strstrbound): Removed.
	(find_header_part_end): Use strnstr.
	(g_mime_parser_construct_part_internal): Use strnstr.

2001-10-26  Jeffrey Stedfast  <fejj@ximian.com>

	* configure.in: Updated the version to 0.7.0

	* doc/*: Updated.

2001-10-25  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-message.c (g_mime_message_new): Now takes an
	"init_headers" argument, it doesn't really matter what value you
	put here - it's more a "I want my message headers to be in a nice
	friendly order rather than the order they are set in".

	* gmime-parser.c (g_mime_parser_construct_message): Use
	!preserve_headers as the init_headers argument to
	g_mime_message_new ().

	* pan-mime-parser.c (g_mime_parser_construct_message): Same.

2001-10-24  Jeffrey Stedfast  <fejj@ximian.com>

	* pan-mime-parser.c (construct_message_headers): Use
	g_mime_header_add instead of g_mime_header_set so we can get
	multiple of the same header (such as "Received:").

	* gmime-parser.c (construct_headers): Use g_mime_header_add
	instead of g_mime_header_set so we can get multiple of the same
	header (such as "Received:") and also move it into the switch
	statement into the default case.

	* gmime-message.c (g_mime_message_set_header): New function to add
	a header to a message.

	* gmime-header.c (g_mime_header_add): New function to add a
	header.

	* gmime-stream.c (g_mime_stream_writev): New function to write a
	vector to a stream.

2001-10-21  Jeffrey Stedfast  <fejj@ximian.com>

	* pan-mime-parser.c: Updated to use g_mime_stream_buffer_readln.

	* gmime-stream-buffer.c (g_mime_stream_buffer_readln): New
	convenience function to read a single line from a stream.

2001-10-12  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-part.c (g_mime_part_write_to_stream): No longer takes a
	'toplevel' argument.
	(g_mime_part_to_string): No longer takes a 'toplevel' argument.

	* gmime-message.c (g_mime_message_write_to_stream): Write the
	MIME-Version header here instead of needing to pass a 'toplevel'
	argument to g_mime_part_write_to_stream().

	* gmime-charset.c (g_mime_charset_init): Fix for Debian and
	Solaris.

2001-10-09  Charles Kerr <charles@rebelbase.com>

	* gmime-filter.c (g_mime_filter_construct): make sure outptr is
	zeroed out before we read it in g_mime_filter_set_size().

2001-10-06  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-filter-basic.c (filter_filter): Implemented uuencoding.
	(filter_complete): Implemented uuencoding.

	* gmime-utils.c (g_mime_utils_uuencode_close): New function to
	flush the uuencoder.
	(g_mime_utils_uuencode_step): New function to uuencode a block of
	data.

2001-10-05  Jeffrey Stedfast  <fejj@ximian.com>

	Fixes for c++ compilation

	* gmime-stream*.c: s/template/stream_template

	* gmime-filter*.c: s/template/filter_template

2001-10-04  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-data-wrapper.c (g_mime_data_wrapper_set_stream): If we
	just change the order of operations, we can get away without a
	second stream pointer.

	* gmime-stream.c (g_mime_stream_substream): Revert.

	* gmime-stream-buffer.c (stream_substream): Instead of calling
	g_mime_stream_substream(), call the source stream's substream
	method directly. I think this is the better fix for the bug
	Charles just fixed.

2001-10-04  Charles Kerr <charles@rebelbase.com>

	* gmime-stream.c (g_mime_stream_substream): fix refcount stealth
	bug.  Calling this on a buffered stream wound up reffing two
	streams instead of one because of a nested call to
	g_mime_stream_substream().  This took a lot of scaffolding to
	find. :)

	* gmime-data-wrapper.c (g_mime_data_wrapper_set_stream): fix
	refcount paranoia bug.  ref the new *before* unreffing the old
	just in case new==old.
	
	* gmime-filter-basic.[ch]: fix some compiler warnings that I
	introduced yesterday.  (Strange how the same version of gcc finds
	different warnings on different platforms.)

2001-10-03  Charles Kerr <charles@rebelbase.com>

	* gmime-part.c (g_mime_part_get_content): bugfix for when getting
	the content from a stream-mem.  We were just returning the
	stream-mem's gbytearray buffer, but we need to check against the
	stream's bounds.

	* gmime-filter-basic.[ch]: added support for decoding a uuencoded
	stream; added a placeholder for uuencoding a stream.

	* md5-utils.c: commented out d(x) macro.

2001-10-02  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-stream-buffer.h: buflen should be an ssize_t not a
	size_t. Thanks to Charles for catching this.

2001-10-01  Charles Kerr <charles@rebelbase.com>

	* gmime-filter.c: include <string.h> to pick up memcpy prototype.
	* gmime-stream-mem.c: same.
	* gmime-stream-buffer.c: same.
	* gmime-stream-filter.c: same.

	* gmime-stream-mem.c (stream_flush): added a retval of 0.

	* gmime-filter-crlf.h (g_mime_filter_crlf_new_type): renamed
	prototype as g_mime_filter_crlf_new to sync with .c

	* gmime-part.h: added g_mime_part_set_content_object() prototype.

	* gmime-content-type.h: Replaced <> with "" in #include
	<gmime-param.h>

	* pan-mime-parser.c: added #include gmime-stream-buffer.h to pick
	up prototype for g_mime_stream_buffer_gets.
	(g_strstrbound): removed unused func.

	* gmime-utils.c: on calls to ctype functions, explicitly upcast
	the char arguments as ints to shut up gcc warnings on Solaris.
	* gmime-param.c: same.

2001-09-29  Jeffrey Stedfast  <fejj@ximian.com>

	* pan-mime-parser.c: New parser (with exactly the same API as
	gmime-parser.c) that is meant to parse MIME objects without
	needing them to be memory mapped. Quite a bit slower on average,
	but is vastly sped up by using a GMimeStreamBuffer in BLOCK_READ
	mode.

	* gmime-stream-buffer.c (stream_write): Incremement the stream
	position by the number of bytes we wrote.
	(stream_tell): Return stream->position.
	(stream_substream): Just return a substream of our source stream.
	(g_mime_stream_buffer_gets): Increment the stream position by the
	number of bytes read if and only if we are operating on a buffered
	stream.

2001-09-27  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-stream-file.c (stream_tell): Return stream->position here
	too.

	* gmime-part.c (g_mime_part_set_pre_encoded_content): Don't decode
	into a stream and then set the data wrapper encoding to the
	incoming encoding type, instead use filters to decode into the
	stream and set the data wrapper encoding to the default.

	* gmime-stream.c (g_mime_stream_set_bounds): Don't set the
	position equal to end if end == -1.

	* gmime-parser.c (g_mime_parser_construct_message): Use the stream
	functions to find the beginning and end of the stream rather than
	breaking abstractions. Also reset the mem stream after writing to
	it.
	(g_mime_parser_construct_part): Reset the mem stream here too.
	(g_mime_parser_construct_part_internal): Use the stream interfaces
	to get the position instead of breaking abstractions.

	* gmime-stream-fs.c (stream_tell): Return stream->position.

	* gmime-stream-mem.c (stream_seek): Return the new syteam
	position.
	(stream_tell): Return stream->position.

2001-09-23  Jeffrey Stedfast  <fejj@ximian.com>

	* doc/gmime-docs.sgml: Documented streams.

	* gmime-stream-fs.c (stream_write): Seek to the position we think
	we're at before attempting to write, and increment the stream
	position after the write.

	* gmime-stream-file.c (stream_write): Seek to the position we
	think we're at... this is just in case we are or have substreams
	that might have read or written in the meantime. Also remember to
	increment the stream position after the write.
	(stream_eos): Only return feof() if our end boundary is unlimited.

	* gmime-stream-mem.c (stream_write): Start writing data at
	stream->position rather than always appending it to the end of the
	mem stream. Also don't go writing past the end boundary if it's
	set.
	(stream_length): Use a relative bound_end.
	(stream_seek): Same.
	(stream_eos): Here too.
	(stream_write): And here.
	(stream_read): And here.
	(stream_substream): Correctly set the bounds.
	(g_mime_stream_mem_new): Here too.
	(g_mime_stream_mem_new_with_byte_array): And here.
	(g_mime_stream_mem_new_with_buffer): Same.
	(g_mime_stream_mem_set_byte_array): And finally here.

2001-09-22  Jeffrey Stedfast  <fejj@ximian.com>

	* test-streams.c: New test suite for streams.

	* gmime-stream-buffer.c (stream_read): Fixed some logic bugs
	(including forgetting a break statement at the end of a case).
	(g_mime_stream_buffer_gets): Fixed some logic bugs.

	* gmime-stream-mem.c (stream_read): Fixed logic error.

2001-09-21  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-stream-buffer.c (g_mime_stream_buffer_gets): Implemented.
	(stream_reset): Implemented.
	(stream_eos): Implemented.
	(stream_write): Reimplemented.
	(stream_read): Reimplemented.

2001-09-21  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-stream-buffer.[c,h]: New stream that buffers reads or
	writes to/from another stream. Will also implement a gets() method
	for Charles.

2001-09-20  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-stream-mem.c (stream_eos): Check for position >= instead
	of == bound_end

	* gmime-stream.c (g_mime_stream_eos): Do some simple bounds
	checking.

	* doc/*: Updated.

	* gmime-part.c (g_mime_part_get_content_object): Added.

2001-09-19  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-stream-fs.c (stream_seek): Improve.

	* gmime-stream-file.c (stream_reset): Oops, reset the position
	pointer on a successful reset.
	(stream_seek): Fixed.

2001-09-19  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-stream-fs.c (stream_reset): Reset the position offset. Doh!

	* gmime-stream.c (g_mime_stream_write_to_stream): Don't increment
	total if no bytes were read/written.

	* gmime-stream-filter.c (stream_substream): Copy over the filters.

	* gmime-part.c (g_mime_part_verify_content_md5): Updated.
	(g_mime_part_set_content_md5): Updated.
	(g_mime_part_get_content): Updated.
	(write_content): Updated.

	* gmime-data-wrapper.c (g_mime_data_wrapper_write_to_stream):
	Implemented.

	* gmime-filter-basic.[c,h]: A basic filter that does Base64 and QP
	encoding/decoding.

	* gmime-filter-crlf.[c,h]: A simple filter that does crlf(/dot)
	encoding/decoding.

2001-09-19  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-data-wrapper.c (g_mime_data_wrapper_new_with_stream): Ref
	the stream.
	(g_mime_data_wrapper_set_stream): Same.
	(g_mime_data_wrapper_get_stream): Return the internal stream.
	(g_mime_data_wrapper_get_encoding): Return the internal stream's
	encoding.
	(g_mime_data_wrapper_write_to_stream): Not-yet-implemented.

	* gmime-filter.[c,h]: Abstract class for filters.

	* gmime-stream-filter.[c,h]: Abstract stream for filtering.

	* gmime-part.c (g_mime_part_set_content): Updated for data-wrapper
	changes.
	(g_mime_part_set_content_byte_array): Same.
	(g_mime_part_set_pre_encoded_content): And here.
	(g_mime_part_get_content): And here too.

	* gmime-parser.c (g_mime_parser_construct_part_internal): Fix
	offset calculations.
	(g_mime_parser_construct_part_internal): Updated for data-wrapper
	changes.

2001-09-18  Jeffrey Stedfast  <fejj@ximian.com>

	* test-parser.c (test_parser): Updated.

	* test-mime.c (test_parser): Updated.

	* gmime-utils.h: Move the GMimePartEncodingType enum here.

	* gmime-stream-fs.[c,h]: Implemented.

	* gmime-stream.c (g_mime_stream_construct): New function to
	initialize the stream data members.
	(g_mime_stream_substream): New function to get a substream of
	another stream.
	(g_mime_stream_unref): If the stream is actually a substream,
	unref it's "super" stream if we are destroying the substream.

	* gmime-stream-mem.c (stream_substream): Implemented.
	(g_mime_stream_mem_new): Updated to use g_mime_stream_construct().
	(g_mime_stream_mem_new_with_byte_array): Same.
	(g_mime_stream_mem_new_with_buffer): And here too.

	* gmime-stream-file.c (stream_substream): Implemented.
	(g_mime_stream_file_new): Updated to use
	g_mime_stream_construct().
	(g_mime_stream_file_new_with_bounds): Same.

	* gmime-part.c (g_mime_part_set_content_md5): Updated to use
	streams.
	(g_mime_part_verify_content_md5): Same.
	(g_mime_part_set_content): Updated to use streams and data
	wrappers.
	(g_mime_part_set_content_byte_array): Same.
	(g_mime_part_set_pre_encoded_content): And here.
	(g_mime_part_set_content_object): New function that allows one to
	set the content object of a MIME part.
	(g_mime_part_get_content): Updated to use streams.
	(write_content): Same.
	(g_mime_part_write_to_stream): Replacement for
	g_mime_part_write_to_string().
	(g_mime_part_to_string): Updated to use
	g_mime_part_write_to_stream().
	(g_mime_part_destroy): Updated to destroy the content object
	rather than destroying a GByteArray (since we longer use a
	GByteArray for the content data).

	* gmime-parser.c (g_mime_parser_construct_message): Now takes a
	stream argument instead of a string.
	(g_mime_parser_construct_message_from_file): Deprecated.
	(g_mime_parser_construct_part): Also takes a stream now.

	* gmime-message.c (g_mime_message_write_to_stream): Replacement
	for g_mime_message_write_to_string().
	(g_mime_message_to_string): Updated.

	* gmime-header.c (g_mime_header_write_to_stream): Replacement for
	g_mime_header_write_to_string().
	(g_mime_header_to_string): Updated.

2001-09-17  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-stream.[c,h]: Abstract stream class.

	* gmime-stream-mem.[c,h]: Memory stream.

	* gmime-stream-file.[c,h]: File stream.

	* gmime-data-wrapper.[c,h]: Data wrapper class. Will be used as
	the content object in MIME parts.

2001-08-23  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-utils.c (encode_8bit_word): Oops. Add the closing ? char.
	(g_mime_utils_8bit_header_encode): Oops. Make sure we encode *all*
	lwsp chars.
	(g_mime_utils_8bit_header_decode): Slightly better fix for the
	other day.

2001-08-19  Jeffrey Stedfast  <fejj@ximian.com>

	* doc/*: Updated.

2001-08-18  Jeffrey Stedfast  <fejj@ximian.com>

	* Makefile.am: Added gmime-charset.[c,h] to the build.

	* gmime-charset.[c,h]: New source files for managing charset
	related issues.
	(g_mime_charset_init): New function to retrieve the user's locale
	information for later use with gmime_charset_locale_name.
	(g_mime_charset_locale_name): New function to return user's
	locale.

	* gmime-utils.c (g_mime_utils_8bit_header_decode): linear
	whitespace isn't the only thing that can delimit atoms.
	(get_codeset): Removed in favor of the new gmime-charset
	functions.
	(g_mime_utils_8bit_header_encode): Use g_mime_charset_locale_name.
	(encode_8bit_word): And here too.

2001-08-15  Jeffrey Stedfast  <fejj@ximian.com>

	* internet-address.c (decode_mailbox): When returning due to a
	missing local part, make sure to set *in to inptr.

2001-08-13  Charles Kerr <charles@rebelbase.com>

	* gmime-utils.c (encode_8bit_word): query nl_langinfo for the
	codeset instead of just assuming iso-8859-1.  Thanks to Volodymyr
	M . Lisivka <lvm@mystery.lviv.net> for suggesting this patch.

	* gmime-utils.c (g_mime_utils_8bit_header_encode): same.

	* gmime-parser.c (find_header_part_end): new utility function to
	find the dividing line between body & header.  * gmime-parser.c
	(g_mime_parser_construct_part): sync.  * gmime-parser.c
	(g_mime_parser_construct_message): sync.

	* gmime-parser.c (get_header_block): remove unused func.  *
	gmime-parser.c (rfc822_headers): remove unused static array.

2001-07-02  Jeffrey Stedfast  <fejj@ximian.com>

	* zentimer.h: Added. Provides some timing macros for performace
	testing.

	* zenprofiler.h: Added. Extends zentimer.h as a simple profiler
	that gives nice printouts.

	* test-parser.c: Use zentimer.h

2001-06-23  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-header.c (g_mime_header_remove): New function.
	(g_mime_header_set): Setting header to NULL no longer removes the
	header. Use g_mime_header_remove instead.

	* gmime-message.c (g_mime_message_write_to_string): No longer have
	to sync the headers.
	(g_mime_message_get_headers): Same.
	(g_mime_message_set_sender): sync the From header.
	(g_mime_message_set_reply_to): Sync the Reply-To header.
	(g_mime_message_add_recipient): Sync the recipient header.
	(g_mime_message_add_recipients_from_string): Same.
	(g_mime_message_set_subject): Sync the Subject header.
	(g_mime_message_set_date): Sync the date header.
	(g_mime_message_set_message_id): Sync the Message-Id header.

2001-06-03  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-utils.c (quoted_encode): Minor cleanup.

2001-06-02  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-message.c (sync_headers): Oops. Don't place "Cc:" in the
	header value string :-)

2001-03-31  Charles Kerr <charles@rebelbase.com>

	* gmime-utils.c (g_mime_utils_8bit_header_decode): big speedups.

	* gmime-utils.c (g_mime_utils_8bit_header_encode): small speedups.

2001-05-29  Jeffrey Stedfast  <fejj@ximian.com>

	* internet-address.c (decode_mailbox): Oops, test to make sure we
	won't be running past the end of the buffer when considering a
	retry. Thanks to Charles Kerr for this fix.

2001-03-29  Charles Kerr <charles@rebelbase.com>

	* gmime-part.c (g_mime_part_append_pre_encoded_content): fix small
	bug that crept into the last commit.

2001-05-29  Jeffrey Stedfast  <fejj@ximian.com>

	Fixes on behalf of Charles Kerr of Pan fame:
	
	* gmime-parser.c (g_mime_parser_construct_part_from_file):
	Use g_mime_part_append_pre_encoded_content().

	* gmime-part.c (g_mime_part_append_pre_encoded_content): New
	function so that the FILE parser doesn't need to manage it's own
	content array.

	* gmime-header.[c,h]: const'ify.
	(g_mime_header_foreach): New function to call a chosen function
	for each header in the header object.

2001-05-26  Jeffrey Stedfast  <fejj@ximian.com>

	* configure.in: Updated version to 0.6.0.

	* README: Updated version to 0.6.0.

	* doc/*: Updated again.

	* gmime-header.c (g_mime_header_to_string): New function - mostly
	for the sake of keeping with the API of the rest of GMime.
	(g_mime_header_set): Make sure to always encode the header value
	before we set it.

	* gmime-part.c (g_mime_part_write_to_string): New function to
	write the mime part to a GString.
	(g_mime_part_to_string): Use g_mime_part_write_to_string.

	* gmime-message.c (g_mime_message_get_headers): Use the new
	g_mime_header_to_string function.
	(g_mime_message_write_to_string): New function to write the
	message to a GString.
	(g_mime_message_to_string): Use write_to_string.

2001-05-25  Jeffrey Stedfast  <fejj@ximian.com>

	* doc/*: Updated.

	* Makefile.am: Add gmime-header.[c,h] to the build.

	* gmime-parser.c: Numerous changes to use gmime-header.

	* gmime-message.c: Numerous changes to use gmime-header.
	(g_mime_message_add_arbitrary_header): Removed.
	(g_mime_message_set_header): The replacement for
	add_arbitrary_header.
	(g_mime_message_get_header): New function to get a header.

	* gmime-header.[c,h]: New source fies to handle the complicated
	nature of setting/getting header pairs.

2001-05-24  Jeffrey Stedfast  <fejj@ximian.com>

	* doc/*: Updated.

	* doc/Makefile.am: Use $(INSTALL) and $(INSTALL_DATA) rather than
	`install -m 644`

	* alloca.c: New file for systems that do not have alloca().

	* Makefile.am: build alloca.c

	* gmime-utils.c: Don't #include <alloca.h> - this is now handled
	by config.h.

	* config.h.in: Added alloca define checks.

	* acconfig.h: Remove some extra defines that we don't care about.

2001-05-20  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-parser.c (parse_content_headers): Simplified and also
	unfolded content-headers.

	* gmime-part.c (g_mime_part_get_filename): If there isn't a
	disposition, make sure that we don't ignore the possibility of a
	"name" param in the Content-Type header.

2001-05-12  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-utils.c (need_quotes): Include '.' as a char to quote.

	* gen-table.c (main): Fixed a type-o.

	* internet-address.c (decode_mailbox): Be a little more forgiving
	about unexpected chars while parsing the name part of the email
	address. Skip the bad char and then retry. If we fail again,
	*then* we abort.

	* gmime-utils.c: #include <alloca.h>

	* gmime-parser.c (g_mime_parser_construct_part): Oops, inend
	points to the end of the string, not the last char of the string
	(ie, '\0' not the char before it).

2001-05-08  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-table-private.h: Oops, take out the check for isblank().

	* internet-address.c (decode_quoted_string): Get rid of unused
	variable.
	(decode_address): Same.

2001-04-03  Jeffrey Stedfast  <fejj@ximian.com>

	* internet-address.c (decode_domain): Try to only get
	"fully-qualified" domain names, or ones that "look" like they are
	at least ;-)
	(decode_mailbox): If decode_domain() returns NULL, don't append
	the '@' char. Also make sure that the name is non-empty.

2001-04-01  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-utils.c (g_mime_utils_quote_string): Made smarter.

2001-03-31  Jeffrey Stedfast  <fejj@ximian.com>

	* Makefile.am: Added rules to build gen-table.c and added
	gmime-table-private.h to the build.

	* gen-table.c: New file to generate gmime-table-private.h if need
	be.

	* gmime-table-private.h: New file that contains
	gmime_special_table.

	* gmime-utils.c: Remove the gmime_special_table from here and
	instead #include gmime-table-private.h.

	* internet-address.c: #include gmime-table-private.h

2001-03-30  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-message.c (create_header): Simplified a tad.
	(g_mime_message_add_recipient): Updated for the new
	InternetAddress API.
	(g_mime_message_add_recipients_from_string): Simplified greatly
	using the new InternetAddress API.

	* internet-address.[c,h]: Completely rewritten to be a lot more
	rfc0822 compliant.

2001-03-28  Jeffrey Stedfast  <fejj@ximian.com>

	* README, configure.in: Updated version to 0.5.0

2001-03-29  Charles Kerr <charles@rebelbase.com>

	* gmime-parser.c (g_mime_parser_construct_message_from_file): new
	function to read a message from a FILE* instead of a character
	array.  This can be used to reduce the memory requirements of very
	large messages.

	* gmime-parser.c (get_next_line): new internal function.
	* gmime-parser.c (g_mime_parser_construct_part_from_file): same.
	* gmime-parser.c (parse_content_headers): same.
	* gmime-parser.c (find_header_end): same.
	* gmime-parser.c (get_header_block): same.
	* gmime-parser.c (get_header_block_from_file): same.

2001-03-28  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-utils.c (get_time): Fix a compile warning.

2001-03-20  Charles Kerr <charles@rebelbase.com>

	* gmime-utils.c (get_year): constify the argument list.
	* gmime-utils.c (get_time): same.

	* gmime-utils.c (get_days_in_month): if #0'ed out unused code.
	* gmime-utils.c (parse_broken_date): same.

2001-03-15  Jeffrey Stedfast  <fejj@ximian.com>

	* internet-address.c (internet_address_new_from_string): Try to be
	a little better about extracting the name, not 100% accurate but
	better I guess.

2001-03-14  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-part.c (g_mime_part_get_content_disposition_parameter):
	It's okay to have a NULL disposition or a NULL param hash.
	(g_mime_part_get_filename): Same.
	(g_mime_part_get_content): It's okay not to have content.

2001-03-13  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-utils.c (quoted_decode): Fix a possible buffer overrun.

2001-02-27  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-utils.c (parse_rfc822_date): Allow for time token to not
	have a seconds field.

2001-02-11  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-part.c (g_mime_part_to_string): Oops. Don't init
	content_md5 with the content location string ;-)

	* gmime-parser.c (g_mime_parser_construct_part): Init content to
	NULL to get rid of a warning (this doesn't really matter as 'len'
	was init'd to 0)

	* gmime-part.c: #include unistd.h

2001-01-27  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-part.c (g_mime_part_set_content_byte_array): So
	set_content_array() was no good. After inspecting glib it was
	discovered that there are hidden data members of a GByteArray that
	hold info like if the data is NUL terminated, how much data is
	allocated, etc.

2001-01-26  Charles Kerr <charles@superpimp.org>

	* gmime-part.c (g_mime_part_set_content_array): new function.

2001-01-25  Charles Kerr <charles@superpimp.org>

	* gmime-part.c (g_mime_part_destroy): fix memory leak - the
	disposition wasn't being g_free()d.

2001-01-24  Charles Kerr <charles@superpimp.org>

	* gmime-part.c (g_mime_part_get_filename): Now takes a const
	GMimePart.

2001-01-17  Jeffrey Stedfast  <fejj@ximian.com>

	* internet-address.c (encoded_name): Updated.

	* gmime-part.c (g_mime_part_set_pre_encoded_content): Updated to
	reflect changes to gmime-utils.

	* gmime-utils.c (g_mime_utils_text_is_8bit): Take a len argument.
	(g_mime_utils_best_encoding): Same.
	(encode_8bit_word): Updated.

2001-01-14  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-parser.c (g_mime_parser_construct_part): Check for NULL
	returns from g_strstrbound.

2001-01-11  Charles Kerr <charles@superpimp.org>

	* gmime-utils.c (get_year): small patch to handle 2-digit year
	representation a little better -- "71" now translates to 1971,
	but "01" now translates to 2001.  Thanks to Ihar Viarheichyk for
	suggesting this change.

2001-01-07  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-part.c (g_mime_part_set_content_md5): Don't allow the
	setting of Content-MD5 headers for multipart/* and message/rfc822
	types.

	* rfc/rfc1864.txt: Added (Content-MD5 RFC).

2001-01-05  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-part.c (g_mime_part_set_content_md5): Oops, didn't quite
	do this right. It should be correct now.
	(g_mime_part_verify_content_md5): New function to verify the
	Content-MD5.

2001-01-04  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-parser.c (g_mime_parser_construct_part): Added support for
	parsing Content-Location and Content-Md5 headers. Trim excess
	trailing \n's. Also fix a bug where the end boundary would get
	included as part of the last MIME Part's contents.
	(g_strstrbound): Bounded strstr.

	* configure.in:
	* README: Updated version to 0.4.0

	* Makefile.am: Added md5-utils to the build.

	* md5-utils.[c,h]: Added.

	* gmime-part.c (g_mime_part_to_string): Slightly new
	implementation. Also added in support for Content-Location and
	Content-Md5 headers.
	(g_mime_part_destroy): Return if the mime part is
	NULL. Also free the new content_location and content_md5 headers.
	(g_mime_part_set_content_md5): Implemented.
	(g_mime_part_get_content_md5): Implemented.
	(g_mime_part_set_content_location): Implemented.
	(g_mime_part_get_content_location): Implemented.
	(get_content_type): Append a '\n'.

2001-01-01  Jeffrey Stedfast  <fejj@helixcode.com>

	* doc/gmime-sections.txt: Updated.

	* doc/sgml/*: Updated.

	* doc/html/*: Updated.

2000-12-24  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-parser.c (g_mime_parser_construct_part): Don't set the
	boundary if we are able to get the boundary from the content-type
	because we'll just set the same data over again which is a
	waste. Also tack a \n onto the ends of the boundary markers so
	that "blah_" and "blah_D" don't trick the parser. Fix it so that
	an empty part won't set any contents (since setting a 0-length
	content stream causes a segfault).
	(construct_headers): Take an inlen argument so that we can parse
	headers without needing to strdup before passing into this
	function.
	(g_mime_parser_construct_message): Don't strdup the headers since
	we can just pass in the length to the construct_headers() function
	now.

2000-12-18  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-parser.c (g_mime_parser_construct_part): Moved from being
	an internal-only function.

2000-12-28  Charles Kerr <charles@superpimp.org>

	* gmime-utils.c (g_mime_utils_text_is_8bit): gracefully handle
	a NULL pointer being passed in.  Thanks to Christophe Lambin for
	reporting this problem.

2000-12-14  Charles Kerr <charles@superpimp.org>

	* gmime-messge.c (g_mime_message_get_message_id):  change
	g_return_if_fail() to g_return_val_if_fail() to ensure that
	a value is always returned.

	* gmime-part.h (g_mime_part_get_content_description): make
	the GMimePart argument const.
	* gmime-part.h (g_mime_part_get_content): same.

	* test-mime.c (test_addresses): fix bad printf statement.

	* test-parser.c (test_parser): fixed the printf type of a time_t
	from an int to unsigned long to avoid compiler warnings.

2000-12-13  Jeffrey Stedfast  <fejj@helixcode.com>

	* doc/sgml/*:
	* doc/html/*:
	* doc/gmime-sections.txt: Updated.

	* README: Updated version line to 0.3.0

2000-12-12  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-part.c (g_mime_part_to_string): Wrap some content-*
	headers that might sometimes be long.

	* gmime-message.c (create_header): Updated to reflect function
	name changes/moves.

	* gmime-utils.c (g_mime_utils_header_printf): Moved here from
	gmime-message.c and slightly renamed ;-)
	(g_mime_utils_header_fold): Moved from being private to being
	public.

2000-12-12  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-part.c: Hmmm, why weren't multiparts using the internal
	get_content_type function rather than ...content_type_to_string?
	Possible FIXME: Should content_type_to_string do what
	get_content_type does? or should it remain untouched and just
	return "type/subtype"?

	* gmime-part.h: No more boundary data member.

	* gmime-part.c (g_mime_part_get_boundary): Updated, as we no
	longer store the boundary on the MIME Part and instead only on the
	content-type (where it belongs).
	(g_mime_part_set_boundary): And here too.
	(g_mime_part_destroy): No longer need to destroy the boundary.

2000-12-11  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-part.c (g_mime_part_get_subpart_from_content_id): Erm,
	smack me. This needs to be recursive (this is what happens when I
	code really late at night).

2000-12-11  Jeffrey Stedfast  <fejj@helixcode.com>

	* configure.in (GMIME_MINOR_VERSION): Updated to 0.3.0

	* gmime-parser.c (get_mime_part): Updated to reflect the
	add_subpart API change.

	* test-mime.c (test_multipart): And here too.

	* gmime-part.h (g_mime_part_add_child): Macro added for backward
	source compatability.

	* gmime-part.c (g_mime_part_get_subpart_from_content_id): Renamed
	from g_mime_part_get_child_from_content_id as I think I'm gonna
	start calling them subparts in the API as it's a bit clearer than
	calling them children. Also fixed up some of the logic (what if
	the parent mime part had a content-id? The way the code was before
	it'd never search the subparts). Oh, it also returns const now.
	(g_mime_part_add_subpart): Renamed from g_mime_part_add_child and
	also now does some error checking to make sure the parent part is
	a multipart.

2000-12-10  Charles Kerr <charles@superpimp.org>

	* gmime-part.c (g_mime_part_get_child_by_content_id): new
	utility function.

2000-12-09  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-part.c (g_mime_part_set_boundary): Generate a random
	boundary if passed boundary is NULL.

2000-12-07  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-message.c (multipart_get_body): Traverses a MIME Part and
	'always' extracts the body assuming it exists. Extracts the
	preffered text type if it exists, otherwise returns the type less
	preferred.
	(g_mime_message_get_body): Use multipart_get_body if the toplevel
	part is a multipart.

2000-12-05  Jeffrey Stedfast  <fejj@helixcode.com>

	* README: Updated with more RFCs, etc.

	* rfc/* Added a bunch more rfcs of interest.

2000-12-04  Jeffrey Stedfast  <fejj@helixcode.com>

	* test-mime.c: Added test code for the address parser.

	* gmime-utils.c (g_mime_utils_quoted_encode_step): Updated. No
	longer need to special-case whitespace chars as they have been put
	into the gmime_special_table (a while ago).

2000-12-02  Jeffrey Stedfast  <fejj@helixcode.com>

	* Makefile.am: Install gmime.m4

	* gmime.m4: Added.

2000-12-02  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-part.c (g_mime_part_foreach): New convenience function for
	manipulating each subpart of a mime part.

	* gmime-message.c (g_mime_message_foreach_part): New convenience
	function for manipulating all mime parts of a message.

2000-12-02  Jeffrey Stedfast  <fejj@helixcode.com>

	* doc/sgml/*:
	* doc/html/*: Updated.

	* doc/gmime-sections.txt: Add g_mime_message_[g,s]et_message_id.

	* gmime-parser.c (construct_headers): Parse out Message-Id
	headers.

	* gmime-message.c (g_mime_message_destroy): Free the message id.
	(g_mime_message_set_message_id): New function to set the message
	id on a message.
	(g_mime_message_set_message_id): New accessor function for
	message-ids.
	(create_header): Write out the Message-Id if and only if it
	exists.

2000-11-29  Jeffrey Stedfast  <fejj@helixcode.com>

	* README: Updated.

	* doc/gmime-sections.txt: Added new functions.

	* doc/html/*: Updated.

2000-11-29  Jeffrey Stedfast  <fejj@helixcode.com>

	* configure.in: Bumped the version to 0.2.0 because the API has
	changed a bit.

	* test-parser.c:
	* test-mime.c: Updated.

	* gmime-utils.c (BASE64_ENCODE_LEN):
	(QP_ENCODE_LEN): Macros for determining how much space we need to
	encode a chunk of data to that encoding (estimate is liberal).
	(encode_8bit_word): Use the macros to determine the length we
	need.

	* gmime-message.c (g_mime_message_get_body): Updated to reflect
	changes to gmime-part.

	* gmime-parser.c (get_mime_part): Updated.

	* gmime-part.c (g_mime_part_set_content): Now takes a len argument
	and has been updated to reflect the move to GByteArray.
	(g_mime_part_destroy): Updated.
	(g_mime_part_set_pre_encoded_content): New convenience function to
	decode pre-encoded content and set it on the mime part.
	(g_mime_part_get_content): Renamed from
	g_mime_part_decode_contents.

	* gmime-part.h: GMimePart->content is now a GByteArray that will
	hold the raw content (in it's unencoded form).

2000-11-28  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-content-type.c (g_mime_content_type_new_from_string):
	Ignore extranious semicolons between parameters. Handle the event
	where the content-type doesn't specify a subtype (this is broken
	but some mailers will send "Content-Type: text" for example).
	(g_mime_content_type_new): If there isn't a type or subtype, print
	a warning and try to do some smart defaulting action.

	* gmime-message.c (handle_multipart_alternative): Only remember
	the last subpart if it was a text part.

2000-11-19  Jeffrey Stedfast  <fejj@helixcode.com>

	* doc/html/*:
	* doc/sgml/*: Updated.

	* test-mime.c: Updated.

	* gmime-utils.c (g_mime_utils_quote_string): Do the detection on
	whether or not to wrap the string in quotes here rather than
	requiring a boolean argument specifying whether the string should
	be quoted. RFC2045 provides us with a list of characters that are
	not safe.

	* gmime-param.c (g_mime_param_to_string): Updated to reflect
	changes to g_mime_utils_quote_string. This function is the main
	reason for the change - parameter values should really only be
	quoted if they have to be else they should remain unquoted.

	* internet-address.c (encoded_name): Updated to reflect changes to
	g_mime_utils_quote_string.

2000-11-19  Jeffrey Stedfast  <fejj@helixcode.com>

	* TODO: Updated.

	* gmime-utils.c: Updated gmime_special_table.
	(g_mime_utils_8bit_header_encode): Since rfc2047 states that all
	whitespace between encoded atoms must be ignored, the encoder
	should therefor make an effort to encode whitespace when it falls
	between two atoms that will be encoded. Use the IS_ESAFE mask.
	(quoted_encode): Now takes a safemask argument to specify which
	chars are safe to leave unencoded and also a arg to save whether
	or not the word was encoded.
	(g_mime_utils_8bit_header_encode_phrase): Updated to use the
	IS_PSAFE mask.

2000-11-19  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-parser.c (header_unfold): New function to unfold a header
	(to be used internally).
	(construct_headers): Unfold headers as we parse them.

	* configure.in: Changed version to 0.1.1.

	* gmime-part.c (get_content_disposition): Append a ";" before
	appending any parameters even when there is no disposition
	text. Also only enter into the param loop if there exist params.

2000-11-16  Jeffrey Stedfast  <fejj@helixcode.com>

	* doc/sgml/*: Added.
	
	* doc/gmime-sections.txt: Added g_mime_part_decode_contents and
	g_mime_header_printf.

	* gmime-message.c (header_fold): New function to fold headers.
	(g_mime_header_printf): New convenience function to print a
	formatted header (which will get correctly folded).
	(create_header): Correctly fold each header.

2000-11-16  Charles Kerr <charles@superpimp.org>

	* gmime-utils.c (datetok): don't crash if the date string passed
	in is NULL.

2000-11-15  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-part.c (g_mime_part_decode_contents): New convenience
	function to decode the contents of a mime part (based on code by
	Wayne Schuller).

2000-11-14  Jeffrey Stedfast  <fejj@helixcode.com>

	* doc/html/index.sgml: Added - apparently we need this :-)

	* doc/Makefile.am: Updated to pass distcheck

2000-11-10  Jeffrey Stedfast  <fejj@helixcode.com>

	* doc/gmime-docs.sgml: Added a new paragraph explaining the
	difference between functions that return const and the ones that
	don't.
	
	* doc/html/*.html: Updated.

	* gmime-message.c: 
	* gmime-part.c: 
	* gmime-parser.c: 
	* internet-address.c: 
	* gmime-param.c: Updated Gtk-Doc comments.

	* gmime-content-type.c: Wrote Gtk-Doc comments.

2000-11-10  Jeffrey Stedfast  <fejj@helixcode.com>
	
	* Makefile.am (SUBDIRS): Added doc

	* configure.in: Generate doc/Makefile

	* doc/Makefile.am: Ignore more headers when performaing
	gtkdoc-scan.

	* doc/gmime-docs.sgml:
	* doc/gmime-sections.txt: Added.

	* doc/html/*.html: Generated library reference.

2000-11-09  Jeffrey Stedfast  <fejj@helixcode.com>

	* TODO: Updated.

	* test-mime.c: Added test of the new quote/unquote functions.
	
	* gmime-message.c (g_mime_message_add_recipients_from_string):
	Check for escaped quotes.
	
	* gmime-part.c (get_content_type): Correctly quote params.
	(get_content_disposition): Same.

	* gmime-param.c (g_mime_param_new_from_string): Check for escaped
	quotes. Also use unquote_string() to unquote the value.
	(g_mime_param_to_string): Correctly quote the value.

	* gmime-parser.c (get_mime_part): Check for escaped quotes and
	correctly unquote strings where appropriate.

	* gmime-utils.c (g_mime_utils_quote_string): New convenience
	function to escape and quote a string.
	(g_mime_utils_unquote_string): New convenience function to
	un-escape and un-quote a string.

	* internet-address.c (encoded_name): Use quote_string().
	(internet_address_new): Use unquote_string() to unquote and
	unescape the name component (it will be re-escaped and re-quoted
	when it's written to a string later).

2000-11-09  Jeffrey Stedfast  <fejj@helixcode.com>

	* TODO: Updated.

2000-11-08  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-parser.c (construct_headers): Oops. Set the subject with
	the decoded string rather than the encoded one.
	(get_mime_part): On the chance that we come accross a broken
	multipart, default the mime type to text/plain and continue on.

2000-11-08  Jeffrey Stedfast  <fejj@helixcode.com>

	* internet-address.c (internet_address_to_string): Moved code
	around to avoid unecessary warnings.

	* gmime-utils.c: Added Gtk-Doc style comments to all the
	functions.
	(g_mime_utils_best_encoding): Return a GMimePartEncodingType
	instead of gint.

2000-11-01  Jeffrey Stedfast  <fejj@helixcode.com>

	* Makefile.am (INCLUDES): Add -DG_LOG_DOMAIN=\"gmime\"

2000-10-31  Jeffrey Stedfast  <fejj@helixcode.com>

	* test-parser.c (test_parser): Test g_mime_message_get_body() here
	as well.

	* test-mime.c: Updated to reflect changes to get_body.
	
	* gmime-message.c (g_mime_message_get_body): Return an allocated
	buffer because we want to return the decoded message body rather
	than the (possibly) encoded form.
	(create_header): Write out the arbitrary headers first as they may
	contain headers like "Received:" which really ought to be at the
	top.

	* gmime-part.c: Removed some old cruft.

2000-10-29  Jeffrey Stedfast  <fejj@helixcode.com>

	* internet-address.c (encoded_name): Use
	g_mime_utils_8bit_header_encode_phrase() to encode the addrspec.

	* gmime-utils.c (g_mime_utils_8bit_header_decode): Fix to make the
	decoder more rfc compliant. As stated by rfc2047, all white space
	between encoded words MUST be ignored.
	(g_mime_utils_8bit_header_encode_phrase): New rfc2047 encoding
	function for phrases (see rfc2047 section 5 part 3).

2000-10-28  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-utils.c (parse_rfc822_date): Fixed the off-by-one-hour
	bug.

	* test-mime.c: Updated to reflect changes to
	g_mime_message_get_body().

	* gmime-message.c (g_mime_message_get_headers): Added Gtk-Doc
	comment.
	(g_mime_message_get_body): Modified to return a const pointer to
	the message body rather than allocating it.

2000-10-28  Charles Kerr <charles@superpimp.org>

	* gmime-message.c (g_mime_message_get_headers): New function
	similar to g_mime_message_get_body.  Useful if you want a raw
	display of headers separate from the body.

	* gmime-message.[c,h] (g_mime_message_get_body): made const.

2000-10-28  Jeffrey Stedfast  <fejj@helixcode.com>

	* tests/Makefile.am: New automake file (when we make a release,
	this directory should really be a part of the tarball as it
	contains data for the test programs).

	* tests/.cvsignore: Added.

	* Makefile.am (SUBDIRS): Add the 'tests' directory

	* configure.in: Generate tests/Makefile

2000-10-27  Jeffrey Stedfast  <fejj@helixcode.com>

	* test-mime.c: Added code to test g_mime_message_get_body()

	* gmime-message.c (g_mime_message_get_body): New convenience
	function that attempts to get the message body in the requested
	text format (plain vs html).

	* gmime-parser.c (construct_headers): If the end of a header field
	is the end of the header, break out of the loop.

	* gmime-content-type.[c,h]: Added const to arguments where
	appropriate.

	* gmime-utils.h: Fixed a spelling mistake in a comment ;-)

2000-10-26  Charles Kerr <charles@superpimp.org>

	* gmime-utils.h: made const the input ptrs for encode/decode
	funcs.

	* gmime-utils.c: Updated to reflect const changes.

2000-10-26  Jeffrey Stedfast  <fejj@helixcode.com>

	* test-mime.c: Also updated.

	* gmime-parser.c (construct_headers): Updated to reflect name
	changes.

	* gmime-message.c: Updated to reflect name changes.

	* gmime-message.h: Changed the name of the recipient type
	#defines.

2000-10-24  Jeffrey Stedfast <fejj@helixcode.com>

	* Makefile.am (SUBDIRS): Added "."

	* configure.in: Create libgmime.spec

2000-10-24  Charles Kerr <charles@superpimp.org>

	* gmime-utils.c: added #include <stdlib.h> to pick up atoi.

	* internet-address.c (internet_address_new): removed unused
	variable `decoded'

2000-10-24  Jeffrey Stedfast  <fejj@helixcode.com>

	Thanks to Charles Kerr of Pan fame for the following fixes.

	* gmime-utils.c (encode_8bit_word): Oops, encode 'word' and not 'ptr'.

	* gmime-part.c (g_mime_part_destroy): Free the content-id.

2000-10-21  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime.h.in: Wrap definitions in #ifndef __GMIME_H__

2000-10-18  Jeffrey Stedfast  <fejj@helixcode.com>

	* TODO: Updated.

	* test-*.c: Updated to reflect GMime API changes.

	* gmime-part.c: #include "gmime-utils.h"

	* gmime-parser.c (g_mime_parser_construct_message): Now takes a
	boolean argument 'save_extra_headers' which tells the parser
	whether it should add unknown headers to the arbitrary header
	array or ignore them.
	(construct_headers): Save the extra headers if desired.

	* gmime-message.c (g_mime_message_add_arbitrary_header): Use the
	new GMimeHeader structure.
	(g_mime_message_new): Always initialize the arbitrary header array.
	(g_mime_message_destroy): The arbitrary header array will never
	be NULL (as it is now pre-initialized) so don't bother
	checking.
	(create_header): rfc2047 encode the arbitrary header values.

2000-10-17  Jeffrey Stedfast  <fejj@helixcode.com>

	* rfc/rfc*.txt: MIME specification RFCs

	* README: Updated.

	* TODO: Added a list of tasks that need to be done eventually.

	* gmime-parser.c (get_mime_part): rfc2047 decode the
	content-description before we set the value.

	* gmime-part.c (g_mime_part_to_string): rfc2047 encode the
	content-description before we write it to the string.

2000-10-06  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-parser.c (construct_headers): rfc2047 decode some headers.

	* internet-address.c (internet_address_to_string): Now takes an
	argument to rfc2047 encode or not, when not rfc2047 encoding.
	(internet_address_new_from_string): Rewrote

	* gmime-message.c (create_header): rfc2047 encode addresses and
	subject headers.

2000-10-05  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-utils.c (g_mime_utils_quoted_encode_step): Fixed some
	non-compliance issues like encoding all spaces as =20 even when
	they shouldn't have been.

2000-10-04  Jeffrey Stedfast  <fejj@helixcode.com>

	* acconfig.h:
	* config.h.in: #undef HAVE_ISBLANK

	* configure.in: Check for the isblank() GNU extension function.
	
	* gmime-parser.c (get_mime_part): Parse for the Content-Id. Use
	isblank() instead of isspace() when looking to see if the content
	header was wrapped. We want it to match only if the next char is
	either a tab or a space.
	(isblank): Define an isblank() macro if HAVE_ISBLANK isn't
	defined.

	* gmime-part.c (g_mime_part_set_content_id): New function to set
	the Content-ID.
	(g_mime_part_get_content_id): New function to get the Content-Id.
	(g_mime_part_to_string): Print content id's if available.
	(get_content_type): Eek! If there aren't any params, don't assign
	'string' an empty string! It's already been initialized with a
	type!

2000-10-04  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-utils.c (quoted_decode): New function to decode rfc2047's
	version of the quoted-printable encoding.
	(decode_8bit_word): Use quoted_decode()
	(quoted_encode): New function to encode to rfc2047's version of
	quoted-printable (removed from the internals of encode_8bit_word)
	(encode_8bit_word): Use quoted_encode()

2000-10-01  Jeffrey Stedfast  <fejj@helixcode.com>

	* internet-address.c (internet_address_new_from_string): Fixed a
	logic error that cut off the last char of the name (or address).

	* gmime-parser.c (construct_headers): Optimized.

	* gmime-part.c (get_content_type): If there are no params, don't
	try to get any. Fixes a segfault.

	* gmime-utils.[c,h]: New utilities functions for use with libgmime
	(time and encoding/decoding routines)
	
	* test-mime.c: test some of the routines in gmime-utils.c

	* gmime.h.in: #include "gmime-utils.h"
	
	* configure.in: Added checks for time zone stuff

	* acconfig.h:
	* config.h.in: Added some #undef's for timezone stuff
	
	* Makefile.am: Added gmime-utils.[c,h]

2000-09-24  Jeffrey Stedfast  <fejj@helixcode.com>

	* HACKING: Updated

	* gmime-param.c: Wrote Gtk-docs comments

	* gmime-parser.c: Wrote Gtk-docs comments

	* AUTHORS: Updated

	* autogen.sh: Updated autogen.sh to look for gmime.h.in instead of
	gmime.h

2000-09-24  Jeffrey Stedfast  <fejj@helixcode.com>
	
	* gmime.h: Removed

	* gmime.h.in: Replacement for gmime.h - modified to be dynamically
	created at build-time.

	* configure.in: Updated to generate gmime.h and also to ignore
	doc/ until docs are written.

	* Makefile.am: Modified to ignore doc/

	* tests/*: MIME messages that break are likely to break MIME
	parsers.

2000-09-24  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-part.c (get_content_disposition): Put a space between
	disposition parameters.
	(get_content_type): New convenience function to dump the content
	type and it's params to a string (for use internally).
	(g_mime_part_to_string): Use get_content_type and add print for
	content-description's.

	* gmime-parser.c (get_mime_part): strip leading/trailing
	whitespace from the disposition and convert param names to
	lowercase. Also fixed Content-Transfer-Encoding.

2000-09-23  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-part.c (g_mime_part_destroy): Erm, make sure to increment
	to the next item in the list.

	* gmime-message.c (recipients_destroy): Optimized a bit

	* gmime-content-type.c (g_mime_content_type_new_from_string):
	Change all parameter names to lowercase, this way we can look them
	up without having to know which case the original name used (eg
	boundary).

	* test-mime.c: renamed from mime-test.c

	* test-parser.c: a new test program that allows us to specify a
	file to get our test email from.

2000-09-22  Jeffrey Stedfast  <fejj@helixcode.com>

	* configure.in: remember glib_cflags and glib_libs so we can dump
	them into gmime-config later.

	* gmime-config.in: use glib_cflags and glib_libs.

	* gmime.h: add variables for major/minor/micro release

	* Makefile.am: switch to GMIME_ instead of LIBGMIME_ stuff
