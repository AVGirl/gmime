2001-08-18  Jeffrey Stedfast  <fejj@ximian.com>

	* Makefile.am: Added gmime-charset.[c,h] to the build.

	* gmime-charset.[c,h]: New source files for managing charset
	related issues.
	(g_mime_charset_init): New function to retrieve the user's locale
	information for later use with gmime_charset_locale_name.
	(g_mime_charset_locale_name): New function to return user's
	locale.

	* gmime-utils.c (g_mime_utils_8bit_header_decode): linear
	whitespace isn't the only thing that can delimit atoms.
	(get_codeset): Removed in favor of the new gmime-charset
	functions.
	(g_mime_utils_8bit_header_encode): Use g_mime_charset_locale_name.
	(encode_8bit_word): And here too.

2001-08-15  Jeffrey Stedfast  <fejj@ximian.com>

	* internet-address.c (decode_mailbox): When returning due to a
	missing local part, make sure to set *in to inptr.

2001-08-13  Charles Kerr <charles@rebelbase.com>

	* gmime-utils.c (encode_8bit_word): query nl_langinfo for the
	codeset instead of just assuming iso-8859-1.  Thanks to Volodymyr
	M . Lisivka <lvm@mystery.lviv.net> for suggesting this patch.

	* gmime-utils.c (g_mime_utils_8bit_header_encode): same.

	* gmime-parser.c (find_header_part_end): new utility function to
	find the dividing line between body & header.  * gmime-parser.c
	(g_mime_parser_construct_part): sync.  * gmime-parser.c
	(g_mime_parser_construct_message): sync.

	* gmime-parser.c (get_header_block): remove unused func.  *
	gmime-parser.c (rfc822_headers): remove unused static array.

2001-07-02  Jeffrey Stedfast  <fejj@ximian.com>

	* zentimer.h: Added. Provides some timing macros for performace
	testing.

	* zenprofiler.h: Added. Extends zentimer.h as a simple profiler
	that gives nice printouts.

	* test-parser.c: Use zentimer.h

2001-06-23  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-header.c (g_mime_header_remove): New function.
	(g_mime_header_set): Setting header to NULL no longer removes the
	header. Use g_mime_header_remove instead.

	* gmime-message.c (g_mime_message_write_to_string): No longer have
	to sync the headers.
	(g_mime_message_get_headers): Same.
	(g_mime_message_set_sender): sync the From header.
	(g_mime_message_set_reply_to): Sync the Reply-To header.
	(g_mime_message_add_recipient): Sync the recipient header.
	(g_mime_message_add_recipients_from_string): Same.
	(g_mime_message_set_subject): Sync the Subject header.
	(g_mime_message_set_date): Sync the date header.
	(g_mime_message_set_message_id): Sync the Message-Id header.

2001-06-03  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-utils.c (quoted_encode): Minor cleanup.

2001-06-02  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-message.c (sync_headers): Oops. Don't place "Cc:" in the
	header value string :-)

2001-03-31  Charles Kerr <charles@rebelbase.com>

	* gmime-utils.c (g_mime_utils_8bit_header_decode): big speedups.

	* gmime-utils.c (g_mime_utils_8bit_header_encode): small speedups.

2001-05-29  Jeffrey Stedfast  <fejj@ximian.com>

	* internet-address.c (decode_mailbox): Oops, test to make sure we
	won't be running past the end of the buffer when considering a
	retry. Thanks to Charles Kerr for this fix.

2001-03-29  Charles Kerr <charles@rebelbase.com>

	* gmime-part.c (g_mime_part_append_pre_encoded_content): fix small
	bug that crept into the last commit.

2001-05-29  Jeffrey Stedfast  <fejj@ximian.com>

	Fixes on behalf of Charles Kerr of Pan fame:
	
	* gmime-parser.c (g_mime_parser_construct_part_from_file):
	Use g_mime_part_append_pre_encoded_content().

	* gmime-part.c (g_mime_part_append_pre_encoded_content): New
	function so that the FILE parser doesn't need to manage it's own
	content array.

	* gmime-header.[c,h]: const'ify.
	(g_mime_header_foreach): New function to call a chosen function
	for each header in the header object.

2001-05-26  Jeffrey Stedfast  <fejj@ximian.com>

	* configure.in: Updated version to 0.6.0.

	* README: Updated version to 0.6.0.

	* doc/*: Updated again.

	* gmime-header.c (g_mime_header_to_string): New function - mostly
	for the sake of keeping with the API of the rest of GMime.
	(g_mime_header_set): Make sure to always encode the header value
	before we set it.

	* gmime-part.c (g_mime_part_write_to_string): New function to
	write the mime part to a GString.
	(g_mime_part_to_string): Use g_mime_part_write_to_string.

	* gmime-message.c (g_mime_message_get_headers): Use the new
	g_mime_header_to_string function.
	(g_mime_message_write_to_string): New function to write the
	message to a GString.
	(g_mime_message_to_string): Use write_to_string.

2001-05-25  Jeffrey Stedfast  <fejj@ximian.com>

	* doc/*: Updated.

	* Makefile.am: Add gmime-header.[c,h] to the build.

	* gmime-parser.c: Numerous changes to use gmime-header.

	* gmime-message.c: Numerous changes to use gmime-header.
	(g_mime_message_add_arbitrary_header): Removed.
	(g_mime_message_set_header): The replacement for
	add_arbitrary_header.
	(g_mime_message_get_header): New function to get a header.

	* gmime-header.[c,h]: New source fies to handle the complicated
	nature of setting/getting header pairs.

2001-05-24  Jeffrey Stedfast  <fejj@ximian.com>

	* doc/*: Updated.

	* doc/Makefile.am: Use $(INSTALL) and $(INSTALL_DATA) rather than
	`install -m 644`

	* alloca.c: New file for systems that do not have alloca().

	* Makefile.am: build alloca.c

	* gmime-utils.c: Don't #include <alloca.h> - this is now handled
	by config.h.

	* config.h.in: Added alloca define checks.

	* acconfig.h: Remove some extra defines that we don't care about.

2001-05-20  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-parser.c (parse_content_headers): Simplified and also
	unfolded content-headers.

	* gmime-part.c (g_mime_part_get_filename): If there isn't a
	disposition, make sure that we don't ignore the possibility of a
	"name" param in the Content-Type header.

2001-05-12  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-utils.c (need_quotes): Include '.' as a char to quote.

	* gen-table.c (main): Fixed a type-o.

	* internet-address.c (decode_mailbox): Be a little more forgiving
	about unexpected chars while parsing the name part of the email
	address. Skip the bad char and then retry. If we fail again,
	*then* we abort.

	* gmime-utils.c: #include <alloca.h>

	* gmime-parser.c (g_mime_parser_construct_part): Oops, inend
	points to the end of the string, not the last char of the string
	(ie, '\0' not the char before it).

2001-05-08  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-table-private.h: Oops, take out the check for isblank().

	* internet-address.c (decode_quoted_string): Get rid of unused
	variable.
	(decode_address): Same.

2001-04-03  Jeffrey Stedfast  <fejj@ximian.com>

	* internet-address.c (decode_domain): Try to only get
	"fully-qualified" domain names, or ones that "look" like they are
	at least ;-)
	(decode_mailbox): If decode_domain() returns NULL, don't append
	the '@' char. Also make sure that the name is non-empty.

2001-04-01  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-utils.c (g_mime_utils_quote_string): Made smarter.

2001-03-31  Jeffrey Stedfast  <fejj@ximian.com>

	* Makefile.am: Added rules to build gen-table.c and added
	gmime-table-private.h to the build.

	* gen-table.c: New file to generate gmime-table-private.h if need
	be.

	* gmime-table-private.h: New file that contains
	gmime_special_table.

	* gmime-utils.c: Remove the gmime_special_table from here and
	instead #include gmime-table-private.h.

	* internet-address.c: #include gmime-table-private.h

2001-03-30  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-message.c (create_header): Simplified a tad.
	(g_mime_message_add_recipient): Updated for the new
	InternetAddress API.
	(g_mime_message_add_recipients_from_string): Simplified greatly
	using the new InternetAddress API.

	* internet-address.[c,h]: Completely rewritten to be a lot more
	rfc0822 compliant.

2001-03-28  Jeffrey Stedfast  <fejj@ximian.com>

	* README, configure.in: Updated version to 0.5.0

2001-03-29  Charles Kerr <charles@rebelbase.com>

	* gmime-parser.c (g_mime_parser_construct_message_from_file): new
	function to read a message from a FILE* instead of a character
	array.  This can be used to reduce the memory requirements of very
	large messages.

	* gmime-parser.c (get_next_line): new internal function.
	* gmime-parser.c (g_mime_parser_construct_part_from_file): same.
	* gmime-parser.c (parse_content_headers): same.
	* gmime-parser.c (find_header_end): same.
	* gmime-parser.c (get_header_block): same.
	* gmime-parser.c (get_header_block_from_file): same.

2001-03-28  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-utils.c (get_time): Fix a compile warning.

2001-03-20  Charles Kerr <charles@rebelbase.com>

	* gmime-utils.c (get_year): constify the argument list.
	* gmime-utils.c (get_time): same.

	* gmime-utils.c (get_days_in_month): if #0'ed out unused code.
	* gmime-utils.c (parse_broken_date): same.

2001-03-15  Jeffrey Stedfast  <fejj@ximian.com>

	* internet-address.c (internet_address_new_from_string): Try to be
	a little better about extracting the name, not 100% accurate but
	better I guess.

2001-03-14  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-part.c (g_mime_part_get_content_disposition_parameter):
	It's okay to have a NULL disposition or a NULL param hash.
	(g_mime_part_get_filename): Same.
	(g_mime_part_get_content): It's okay not to have content.

2001-03-13  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-utils.c (quoted_decode): Fix a possible buffer overrun.

2001-02-27  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-utils.c (parse_rfc822_date): Allow for time token to not
	have a seconds field.

2001-02-11  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-part.c (g_mime_part_to_string): Oops. Don't init
	content_md5 with the content location string ;-)

	* gmime-parser.c (g_mime_parser_construct_part): Init content to
	NULL to get rid of a warning (this doesn't really matter as 'len'
	was init'd to 0)

	* gmime-part.c: #include unistd.h

2001-01-27  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-part.c (g_mime_part_set_content_byte_array): So
	set_content_array() was no good. After inspecting glib it was
	discovered that there are hidden data members of a GByteArray that
	hold info like if the data is NUL terminated, how much data is
	allocated, etc.

2001-01-26  Charles Kerr <charles@superpimp.org>

	* gmime-part.c (g_mime_part_set_content_array): new function.

2001-01-25  Charles Kerr <charles@superpimp.org>

	* gmime-part.c (g_mime_part_destroy): fix memory leak - the
	disposition wasn't being g_free()d.

2001-01-24  Charles Kerr <charles@superpimp.org>

	* gmime-part.c (g_mime_part_get_filename): Now takes a const
	GMimePart.

2001-01-17  Jeffrey Stedfast  <fejj@ximian.com>

	* internet-address.c (encoded_name): Updated.

	* gmime-part.c (g_mime_part_set_pre_encoded_content): Updated to
	reflect changes to gmime-utils.

	* gmime-utils.c (g_mime_utils_text_is_8bit): Take a len argument.
	(g_mime_utils_best_encoding): Same.
	(encode_8bit_word): Updated.

2001-01-14  Jeffrey Stedfast  <fejj@ximian.com>

	* gmime-parser.c (g_mime_parser_construct_part): Check for NULL
	returns from g_strstrbound.

2001-01-11  Charles Kerr <charles@superpimp.org>

	* gmime-utils.c (get_year): small patch to handle 2-digit year
	representation a little better -- "71" now translates to 1971,
	but "01" now translates to 2001.  Thanks to Ihar Viarheichyk for
	suggesting this change.

2001-01-07  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-part.c (g_mime_part_set_content_md5): Don't allow the
	setting of Content-MD5 headers for multipart/* and message/rfc822
	types.

	* rfc/rfc1864.txt: Added (Content-MD5 RFC).

2001-01-05  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-part.c (g_mime_part_set_content_md5): Oops, didn't quite
	do this right. It should be correct now.
	(g_mime_part_verify_content_md5): New function to verify the
	Content-MD5.

2001-01-04  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-parser.c (g_mime_parser_construct_part): Added support for
	parsing Content-Location and Content-Md5 headers. Trim excess
	trailing \n's. Also fix a bug where the end boundary would get
	included as part of the last MIME Part's contents.
	(g_strstrbound): Bounded strstr.

	* configure.in:
	* README: Updated version to 0.4.0

	* Makefile.am: Added md5-utils to the build.

	* md5-utils.[c,h]: Added.

	* gmime-part.c (g_mime_part_to_string): Slightly new
	implementation. Also added in support for Content-Location and
	Content-Md5 headers.
	(g_mime_part_destroy): Return if the mime part is
	NULL. Also free the new content_location and content_md5 headers.
	(g_mime_part_set_content_md5): Implemented.
	(g_mime_part_get_content_md5): Implemented.
	(g_mime_part_set_content_location): Implemented.
	(g_mime_part_get_content_location): Implemented.
	(get_content_type): Append a '\n'.

2001-01-01  Jeffrey Stedfast  <fejj@helixcode.com>

	* doc/gmime-sections.txt: Updated.

	* doc/sgml/*: Updated.

	* doc/html/*: Updated.

2000-12-24  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-parser.c (g_mime_parser_construct_part): Don't set the
	boundary if we are able to get the boundary from the content-type
	because we'll just set the same data over again which is a
	waste. Also tack a \n onto the ends of the boundary markers so
	that "blah_" and "blah_D" don't trick the parser. Fix it so that
	an empty part won't set any contents (since setting a 0-length
	content stream causes a segfault).
	(construct_headers): Take an inlen argument so that we can parse
	headers without needing to strdup before passing into this
	function.
	(g_mime_parser_construct_message): Don't strdup the headers since
	we can just pass in the length to the construct_headers() function
	now.

2000-12-18  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-parser.c (g_mime_parser_construct_part): Moved from being
	an internal-only function.

2000-12-28  Charles Kerr <charles@superpimp.org>

	* gmime-utils.c (g_mime_utils_text_is_8bit): gracefully handle
	a NULL pointer being passed in.  Thanks to Christophe Lambin for
	reporting this problem.

2000-12-14  Charles Kerr <charles@superpimp.org>

	* gmime-messge.c (g_mime_message_get_message_id):  change
	g_return_if_fail() to g_return_val_if_fail() to ensure that
	a value is always returned.

	* gmime-part.h (g_mime_part_get_content_description): make
	the GMimePart argument const.
	* gmime-part.h (g_mime_part_get_content): same.

	* test-mime.c (test_addresses): fix bad printf statement.

	* test-parser.c (test_parser): fixed the printf type of a time_t
	from an int to unsigned long to avoid compiler warnings.

2000-12-13  Jeffrey Stedfast  <fejj@helixcode.com>

	* doc/sgml/*:
	* doc/html/*:
	* doc/gmime-sections.txt: Updated.

	* README: Updated version line to 0.3.0

2000-12-12  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-part.c (g_mime_part_to_string): Wrap some content-*
	headers that might sometimes be long.

	* gmime-message.c (create_header): Updated to reflect function
	name changes/moves.

	* gmime-utils.c (g_mime_utils_header_printf): Moved here from
	gmime-message.c and slightly renamed ;-)
	(g_mime_utils_header_fold): Moved from being private to being
	public.

2000-12-12  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-part.c: Hmmm, why weren't multiparts using the internal
	get_content_type function rather than ...content_type_to_string?
	Possible FIXME: Should content_type_to_string do what
	get_content_type does? or should it remain untouched and just
	return "type/subtype"?

	* gmime-part.h: No more boundary data member.

	* gmime-part.c (g_mime_part_get_boundary): Updated, as we no
	longer store the boundary on the MIME Part and instead only on the
	content-type (where it belongs).
	(g_mime_part_set_boundary): And here too.
	(g_mime_part_destroy): No longer need to destroy the boundary.

2000-12-11  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-part.c (g_mime_part_get_subpart_from_content_id): Erm,
	smack me. This needs to be recursive (this is what happens when I
	code really late at night).

2000-12-11  Jeffrey Stedfast  <fejj@helixcode.com>

	* configure.in (GMIME_MINOR_VERSION): Updated to 0.3.0

	* gmime-parser.c (get_mime_part): Updated to reflect the
	add_subpart API change.

	* test-mime.c (test_multipart): And here too.

	* gmime-part.h (g_mime_part_add_child): Macro added for backward
	source compatability.

	* gmime-part.c (g_mime_part_get_subpart_from_content_id): Renamed
	from g_mime_part_get_child_from_content_id as I think I'm gonna
	start calling them subparts in the API as it's a bit clearer than
	calling them children. Also fixed up some of the logic (what if
	the parent mime part had a content-id? The way the code was before
	it'd never search the subparts). Oh, it also returns const now.
	(g_mime_part_add_subpart): Renamed from g_mime_part_add_child and
	also now does some error checking to make sure the parent part is
	a multipart.

2000-12-10  Charles Kerr <charles@superpimp.org>

	* gmime-part.c (g_mime_part_get_child_by_content_id): new
	utility function.

2000-12-09  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-part.c (g_mime_part_set_boundary): Generate a random
	boundary if passed boundary is NULL.

2000-12-07  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-message.c (multipart_get_body): Traverses a MIME Part and
	'always' extracts the body assuming it exists. Extracts the
	preffered text type if it exists, otherwise returns the type less
	preferred.
	(g_mime_message_get_body): Use multipart_get_body if the toplevel
	part is a multipart.

2000-12-05  Jeffrey Stedfast  <fejj@helixcode.com>

	* README: Updated with more RFCs, etc.

	* rfc/* Added a bunch more rfcs of interest.

2000-12-04  Jeffrey Stedfast  <fejj@helixcode.com>

	* test-mime.c: Added test code for the address parser.

	* gmime-utils.c (g_mime_utils_quoted_encode_step): Updated. No
	longer need to special-case whitespace chars as they have been put
	into the gmime_special_table (a while ago).

2000-12-02  Jeffrey Stedfast  <fejj@helixcode.com>

	* Makefile.am: Install gmime.m4

	* gmime.m4: Added.

2000-12-02  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-part.c (g_mime_part_foreach): New convenience function for
	manipulating each subpart of a mime part.

	* gmime-message.c (g_mime_message_foreach_part): New convenience
	function for manipulating all mime parts of a message.

2000-12-02  Jeffrey Stedfast  <fejj@helixcode.com>

	* doc/sgml/*:
	* doc/html/*: Updated.

	* doc/gmime-sections.txt: Add g_mime_message_[g,s]et_message_id.

	* gmime-parser.c (construct_headers): Parse out Message-Id
	headers.

	* gmime-message.c (g_mime_message_destroy): Free the message id.
	(g_mime_message_set_message_id): New function to set the message
	id on a message.
	(g_mime_message_set_message_id): New accessor function for
	message-ids.
	(create_header): Write out the Message-Id if and only if it
	exists.

2000-11-29  Jeffrey Stedfast  <fejj@helixcode.com>

	* README: Updated.

	* doc/gmime-sections.txt: Added new functions.

	* doc/html/*: Updated.

2000-11-29  Jeffrey Stedfast  <fejj@helixcode.com>

	* configure.in: Bumped the version to 0.2.0 because the API has
	changed a bit.

	* test-parser.c:
	* test-mime.c: Updated.

	* gmime-utils.c (BASE64_ENCODE_LEN):
	(QP_ENCODE_LEN): Macros for determining how much space we need to
	encode a chunk of data to that encoding (estimate is liberal).
	(encode_8bit_word): Use the macros to determine the length we
	need.

	* gmime-message.c (g_mime_message_get_body): Updated to reflect
	changes to gmime-part.

	* gmime-parser.c (get_mime_part): Updated.

	* gmime-part.c (g_mime_part_set_content): Now takes a len argument
	and has been updated to reflect the move to GByteArray.
	(g_mime_part_destroy): Updated.
	(g_mime_part_set_pre_encoded_content): New convenience function to
	decode pre-encoded content and set it on the mime part.
	(g_mime_part_get_content): Renamed from
	g_mime_part_decode_contents.

	* gmime-part.h: GMimePart->content is now a GByteArray that will
	hold the raw content (in it's unencoded form).

2000-11-28  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-content-type.c (g_mime_content_type_new_from_string):
	Ignore extranious semicolons between parameters. Handle the event
	where the content-type doesn't specify a subtype (this is broken
	but some mailers will send "Content-Type: text" for example).
	(g_mime_content_type_new): If there isn't a type or subtype, print
	a warning and try to do some smart defaulting action.

	* gmime-message.c (handle_multipart_alternative): Only remember
	the last subpart if it was a text part.

2000-11-19  Jeffrey Stedfast  <fejj@helixcode.com>

	* doc/html/*:
	* doc/sgml/*: Updated.

	* test-mime.c: Updated.

	* gmime-utils.c (g_mime_utils_quote_string): Do the detection on
	whether or not to wrap the string in quotes here rather than
	requiring a boolean argument specifying whether the string should
	be quoted. RFC2045 provides us with a list of characters that are
	not safe.

	* gmime-param.c (g_mime_param_to_string): Updated to reflect
	changes to g_mime_utils_quote_string. This function is the main
	reason for the change - parameter values should really only be
	quoted if they have to be else they should remain unquoted.

	* internet-address.c (encoded_name): Updated to reflect changes to
	g_mime_utils_quote_string.

2000-11-19  Jeffrey Stedfast  <fejj@helixcode.com>

	* TODO: Updated.

	* gmime-utils.c: Updated gmime_special_table.
	(g_mime_utils_8bit_header_encode): Since rfc2047 states that all
	whitespace between encoded atoms must be ignored, the encoder
	should therefor make an effort to encode whitespace when it falls
	between two atoms that will be encoded. Use the IS_ESAFE mask.
	(quoted_encode): Now takes a safemask argument to specify which
	chars are safe to leave unencoded and also a arg to save whether
	or not the word was encoded.
	(g_mime_utils_8bit_header_encode_phrase): Updated to use the
	IS_PSAFE mask.

2000-11-19  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-parser.c (header_unfold): New function to unfold a header
	(to be used internally).
	(construct_headers): Unfold headers as we parse them.

	* configure.in: Changed version to 0.1.1.

	* gmime-part.c (get_content_disposition): Append a ";" before
	appending any parameters even when there is no disposition
	text. Also only enter into the param loop if there exist params.

2000-11-16  Jeffrey Stedfast  <fejj@helixcode.com>

	* doc/sgml/*: Added.
	
	* doc/gmime-sections.txt: Added g_mime_part_decode_contents and
	g_mime_header_printf.

	* gmime-message.c (header_fold): New function to fold headers.
	(g_mime_header_printf): New convenience function to print a
	formatted header (which will get correctly folded).
	(create_header): Correctly fold each header.

2000-11-16  Charles Kerr <charles@superpimp.org>

	* gmime-utils.c (datetok): don't crash if the date string passed
	in is NULL.

2000-11-15  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-part.c (g_mime_part_decode_contents): New convenience
	function to decode the contents of a mime part (based on code by
	Wayne Schuller).

2000-11-14  Jeffrey Stedfast  <fejj@helixcode.com>

	* doc/html/index.sgml: Added - apparently we need this :-)

	* doc/Makefile.am: Updated to pass distcheck

2000-11-10  Jeffrey Stedfast  <fejj@helixcode.com>

	* doc/gmime-docs.sgml: Added a new paragraph explaining the
	difference between functions that return const and the ones that
	don't.
	
	* doc/html/*.html: Updated.

	* gmime-message.c: 
	* gmime-part.c: 
	* gmime-parser.c: 
	* internet-address.c: 
	* gmime-param.c: Updated Gtk-Doc comments.

	* gmime-content-type.c: Wrote Gtk-Doc comments.

2000-11-10  Jeffrey Stedfast  <fejj@helixcode.com>
	
	* Makefile.am (SUBDIRS): Added doc

	* configure.in: Generate doc/Makefile

	* doc/Makefile.am: Ignore more headers when performaing
	gtkdoc-scan.

	* doc/gmime-docs.sgml:
	* doc/gmime-sections.txt: Added.

	* doc/html/*.html: Generated library reference.

2000-11-09  Jeffrey Stedfast  <fejj@helixcode.com>

	* TODO: Updated.

	* test-mime.c: Added test of the new quote/unquote functions.
	
	* gmime-message.c (g_mime_message_add_recipients_from_string):
	Check for escaped quotes.
	
	* gmime-part.c (get_content_type): Correctly quote params.
	(get_content_disposition): Same.

	* gmime-param.c (g_mime_param_new_from_string): Check for escaped
	quotes. Also use unquote_string() to unquote the value.
	(g_mime_param_to_string): Correctly quote the value.

	* gmime-parser.c (get_mime_part): Check for escaped quotes and
	correctly unquote strings where appropriate.

	* gmime-utils.c (g_mime_utils_quote_string): New convenience
	function to escape and quote a string.
	(g_mime_utils_unquote_string): New convenience function to
	un-escape and un-quote a string.

	* internet-address.c (encoded_name): Use quote_string().
	(internet_address_new): Use unquote_string() to unquote and
	unescape the name component (it will be re-escaped and re-quoted
	when it's written to a string later).

2000-11-09  Jeffrey Stedfast  <fejj@helixcode.com>

	* TODO: Updated.

2000-11-08  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-parser.c (construct_headers): Oops. Set the subject with
	the decoded string rather than the encoded one.
	(get_mime_part): On the chance that we come accross a broken
	multipart, default the mime type to text/plain and continue on.

2000-11-08  Jeffrey Stedfast  <fejj@helixcode.com>

	* internet-address.c (internet_address_to_string): Moved code
	around to avoid unecessary warnings.

	* gmime-utils.c: Added Gtk-Doc style comments to all the
	functions.
	(g_mime_utils_best_encoding): Return a GMimePartEncodingType
	instead of gint.

2000-11-01  Jeffrey Stedfast  <fejj@helixcode.com>

	* Makefile.am (INCLUDES): Add -DG_LOG_DOMAIN=\"gmime\"

2000-10-31  Jeffrey Stedfast  <fejj@helixcode.com>

	* test-parser.c (test_parser): Test g_mime_message_get_body() here
	as well.

	* test-mime.c: Updated to reflect changes to get_body.
	
	* gmime-message.c (g_mime_message_get_body): Return an allocated
	buffer because we want to return the decoded message body rather
	than the (possibly) encoded form.
	(create_header): Write out the arbitrary headers first as they may
	contain headers like "Received:" which really ought to be at the
	top.

	* gmime-part.c: Removed some old cruft.

2000-10-29  Jeffrey Stedfast  <fejj@helixcode.com>

	* internet-address.c (encoded_name): Use
	g_mime_utils_8bit_header_encode_phrase() to encode the addrspec.

	* gmime-utils.c (g_mime_utils_8bit_header_decode): Fix to make the
	decoder more rfc compliant. As stated by rfc2047, all white space
	between encoded words MUST be ignored.
	(g_mime_utils_8bit_header_encode_phrase): New rfc2047 encoding
	function for phrases (see rfc2047 section 5 part 3).

2000-10-28  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-utils.c (parse_rfc822_date): Fixed the off-by-one-hour
	bug.

	* test-mime.c: Updated to reflect changes to
	g_mime_message_get_body().

	* gmime-message.c (g_mime_message_get_headers): Added Gtk-Doc
	comment.
	(g_mime_message_get_body): Modified to return a const pointer to
	the message body rather than allocating it.

2000-10-28  Charles Kerr <charles@superpimp.org>

	* gmime-message.c (g_mime_message_get_headers): New function
	similar to g_mime_message_get_body.  Useful if you want a raw
	display of headers separate from the body.

	* gmime-message.[c,h] (g_mime_message_get_body): made const.

2000-10-28  Jeffrey Stedfast  <fejj@helixcode.com>

	* tests/Makefile.am: New automake file (when we make a release,
	this directory should really be a part of the tarball as it
	contains data for the test programs).

	* tests/.cvsignore: Added.

	* Makefile.am (SUBDIRS): Add the 'tests' directory

	* configure.in: Generate tests/Makefile

2000-10-27  Jeffrey Stedfast  <fejj@helixcode.com>

	* test-mime.c: Added code to test g_mime_message_get_body()

	* gmime-message.c (g_mime_message_get_body): New convenience
	function that attempts to get the message body in the requested
	text format (plain vs html).

	* gmime-parser.c (construct_headers): If the end of a header field
	is the end of the header, break out of the loop.

	* gmime-content-type.[c,h]: Added const to arguments where
	appropriate.

	* gmime-utils.h: Fixed a spelling mistake in a comment ;-)

2000-10-26  Charles Kerr <charles@superpimp.org>

	* gmime-utils.h: made const the input ptrs for encode/decode
	funcs.

	* gmime-utils.c: Updated to reflect const changes.

2000-10-26  Jeffrey Stedfast  <fejj@helixcode.com>

	* test-mime.c: Also updated.

	* gmime-parser.c (construct_headers): Updated to reflect name
	changes.

	* gmime-message.c: Updated to reflect name changes.

	* gmime-message.h: Changed the name of the recipient type
	#defines.

2000-10-24  Jeffrey Stedfast <fejj@helixcode.com>

	* Makefile.am (SUBDIRS): Added "."

	* configure.in: Create libgmime.spec

2000-10-24  Charles Kerr <charles@superpimp.org>

	* gmime-utils.c: added #include <stdlib.h> to pick up atoi.

	* internet-address.c (internet_address_new): removed unused
	variable `decoded'

2000-10-24  Jeffrey Stedfast  <fejj@helixcode.com>

	Thanks to Charles Kerr of Pan fame for the following fixes.

	* gmime-utils.c (encode_8bit_word): Oops, encode 'word' and not 'ptr'.

	* gmime-part.c (g_mime_part_destroy): Free the content-id.

2000-10-21  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime.h.in: Wrap definitions in #ifndef __GMIME_H__

2000-10-18  Jeffrey Stedfast  <fejj@helixcode.com>

	* TODO: Updated.

	* test-*.c: Updated to reflect GMime API changes.

	* gmime-part.c: #include "gmime-utils.h"

	* gmime-parser.c (g_mime_parser_construct_message): Now takes a
	boolean argument 'save_extra_headers' which tells the parser
	whether it should add unknown headers to the arbitrary header
	array or ignore them.
	(construct_headers): Save the extra headers if desired.

	* gmime-message.c (g_mime_message_add_arbitrary_header): Use the
	new GMimeHeader structure.
	(g_mime_message_new): Always initialize the arbitrary header array.
	(g_mime_message_destroy): The arbitrary header array will never
	be NULL (as it is now pre-initialized) so don't bother
	checking.
	(create_header): rfc2047 encode the arbitrary header values.

2000-10-17  Jeffrey Stedfast  <fejj@helixcode.com>

	* rfc/rfc*.txt: MIME specification RFCs

	* README: Updated.

	* TODO: Added a list of tasks that need to be done eventually.

	* gmime-parser.c (get_mime_part): rfc2047 decode the
	content-description before we set the value.

	* gmime-part.c (g_mime_part_to_string): rfc2047 encode the
	content-description before we write it to the string.

2000-10-06  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-parser.c (construct_headers): rfc2047 decode some headers.

	* internet-address.c (internet_address_to_string): Now takes an
	argument to rfc2047 encode or not, when not rfc2047 encoding.
	(internet_address_new_from_string): Rewrote

	* gmime-message.c (create_header): rfc2047 encode addresses and
	subject headers.

2000-10-05  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-utils.c (g_mime_utils_quoted_encode_step): Fixed some
	non-compliance issues like encoding all spaces as =20 even when
	they shouldn't have been.

2000-10-04  Jeffrey Stedfast  <fejj@helixcode.com>

	* acconfig.h:
	* config.h.in: #undef HAVE_ISBLANK

	* configure.in: Check for the isblank() GNU extension function.
	
	* gmime-parser.c (get_mime_part): Parse for the Content-Id. Use
	isblank() instead of isspace() when looking to see if the content
	header was wrapped. We want it to match only if the next char is
	either a tab or a space.
	(isblank): Define an isblank() macro if HAVE_ISBLANK isn't
	defined.

	* gmime-part.c (g_mime_part_set_content_id): New function to set
	the Content-ID.
	(g_mime_part_get_content_id): New function to get the Content-Id.
	(g_mime_part_to_string): Print content id's if available.
	(get_content_type): Eek! If there aren't any params, don't assign
	'string' an empty string! It's already been initialized with a
	type!

2000-10-04  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-utils.c (quoted_decode): New function to decode rfc2047's
	version of the quoted-printable encoding.
	(decode_8bit_word): Use quoted_decode()
	(quoted_encode): New function to encode to rfc2047's version of
	quoted-printable (removed from the internals of encode_8bit_word)
	(encode_8bit_word): Use quoted_encode()

2000-10-01  Jeffrey Stedfast  <fejj@helixcode.com>

	* internet-address.c (internet_address_new_from_string): Fixed a
	logic error that cut off the last char of the name (or address).

	* gmime-parser.c (construct_headers): Optimized.

	* gmime-part.c (get_content_type): If there are no params, don't
	try to get any. Fixes a segfault.

	* gmime-utils.[c,h]: New utilities functions for use with libgmime
	(time and encoding/decoding routines)
	
	* test-mime.c: test some of the routines in gmime-utils.c

	* gmime.h.in: #include "gmime-utils.h"
	
	* configure.in: Added checks for time zone stuff

	* acconfig.h:
	* config.h.in: Added some #undef's for timezone stuff
	
	* Makefile.am: Added gmime-utils.[c,h]

2000-09-24  Jeffrey Stedfast  <fejj@helixcode.com>

	* HACKING: Updated

	* gmime-param.c: Wrote Gtk-docs comments

	* gmime-parser.c: Wrote Gtk-docs comments

	* AUTHORS: Updated

	* autogen.sh: Updated autogen.sh to look for gmime.h.in instead of
	gmime.h

2000-09-24  Jeffrey Stedfast  <fejj@helixcode.com>
	
	* gmime.h: Removed

	* gmime.h.in: Replacement for gmime.h - modified to be dynamically
	created at build-time.

	* configure.in: Updated to generate gmime.h and also to ignore
	doc/ until docs are written.

	* Makefile.am: Modified to ignore doc/

	* tests/*: MIME messages that break are likely to break MIME
	parsers.

2000-09-24  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-part.c (get_content_disposition): Put a space between
	disposition parameters.
	(get_content_type): New convenience function to dump the content
	type and it's params to a string (for use internally).
	(g_mime_part_to_string): Use get_content_type and add print for
	content-description's.

	* gmime-parser.c (get_mime_part): strip leading/trailing
	whitespace from the disposition and convert param names to
	lowercase. Also fixed Content-Transfer-Encoding.

2000-09-23  Jeffrey Stedfast  <fejj@helixcode.com>

	* gmime-part.c (g_mime_part_destroy): Erm, make sure to increment
	to the next item in the list.

	* gmime-message.c (recipients_destroy): Optimized a bit

	* gmime-content-type.c (g_mime_content_type_new_from_string):
	Change all parameter names to lowercase, this way we can look them
	up without having to know which case the original name used (eg
	boundary).

	* test-mime.c: renamed from mime-test.c

	* test-parser.c: a new test program that allows us to specify a
	file to get our test email from.

2000-09-22  Jeffrey Stedfast  <fejj@helixcode.com>

	* configure.in: remember glib_cflags and glib_libs so we can dump
	them into gmime-config later.

	* gmime-config.in: use glib_cflags and glib_libs.

	* gmime.h: add variables for major/minor/micro release

	* Makefile.am: switch to GMIME_ instead of LIBGMIME_ stuff
